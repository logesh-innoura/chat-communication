{"ast":null,"code":"/*! @azure/msal-browser v3.7.0 2024-01-09 */\n'use strict';\n\nimport { createBrowserAuthError } from '../error/BrowserAuthError.mjs';\nimport { PerformanceEvents } from '@azure/msal-common';\nimport { KEY_FORMAT_JWK } from '../utils/BrowserConstants.mjs';\nimport { cryptoNonExistent } from '../error/BrowserAuthErrorCodes.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * This file defines functions used by the browser library to perform cryptography operations such as\r\n * hashing and encoding. It also has helper functions to validate the availability of specific APIs.\r\n */\n/**\r\n * See here for more info on RsaHashedKeyGenParams: https://developer.mozilla.org/en-US/docs/Web/API/RsaHashedKeyGenParams\r\n */\n// RSA KeyGen Algorithm\nconst PKCS1_V15_KEYGEN_ALG = \"RSASSA-PKCS1-v1_5\";\n// SHA-256 hashing algorithm\nconst S256_HASH_ALG = \"SHA-256\";\n// MOD length for PoP tokens\nconst MODULUS_LENGTH = 2048;\n// Public Exponent\nconst PUBLIC_EXPONENT = new Uint8Array([0x01, 0x00, 0x01]);\nconst keygenAlgorithmOptions = {\n  name: PKCS1_V15_KEYGEN_ALG,\n  hash: S256_HASH_ALG,\n  modulusLength: MODULUS_LENGTH,\n  publicExponent: PUBLIC_EXPONENT\n};\n/**\r\n * Check whether browser crypto is available.\r\n */\nfunction validateCryptoAvailable(logger) {\n  if (\"crypto\" in window) {\n    logger.verbose(\"BrowserCrypto: modern crypto interface available\");\n  } else {\n    logger.error(\"BrowserCrypto: crypto interface is unavailable\");\n    throw createBrowserAuthError(cryptoNonExistent);\n  }\n}\n/**\r\n * Returns a sha-256 hash of the given dataString as an ArrayBuffer.\r\n * @param dataString\r\n */\nasync function sha256Digest(dataString, performanceClient, correlationId) {\n  performanceClient?.addQueueMeasurement(PerformanceEvents.Sha256Digest, correlationId);\n  const encoder = new TextEncoder();\n  const data = encoder.encode(dataString);\n  return window.crypto.subtle.digest(S256_HASH_ALG, data);\n}\n/**\r\n * Populates buffer with cryptographically random values.\r\n * @param dataBuffer\r\n */\nfunction getRandomValues(dataBuffer) {\n  return window.crypto.getRandomValues(dataBuffer);\n}\n/**\r\n * Creates a new random GUID\r\n * @returns\r\n */\nfunction createNewGuid() {\n  return window.crypto.randomUUID();\n}\n/**\r\n * Generates a keypair based on current keygen algorithm config.\r\n * @param extractable\r\n * @param usages\r\n */\nasync function generateKeyPair(extractable, usages) {\n  return window.crypto.subtle.generateKey(keygenAlgorithmOptions, extractable, usages);\n}\n/**\r\n * Export key as Json Web Key (JWK)\r\n * @param key\r\n */\nasync function exportJwk(key) {\n  return window.crypto.subtle.exportKey(KEY_FORMAT_JWK, key);\n}\n/**\r\n * Imports key as Json Web Key (JWK), can set extractable and usages.\r\n * @param key\r\n * @param extractable\r\n * @param usages\r\n */\nasync function importJwk(key, extractable, usages) {\n  return window.crypto.subtle.importKey(KEY_FORMAT_JWK, key, keygenAlgorithmOptions, extractable, usages);\n}\n/**\r\n * Signs given data with given key\r\n * @param key\r\n * @param data\r\n */\nasync function sign(key, data) {\n  return window.crypto.subtle.sign(keygenAlgorithmOptions, key, data);\n}\nexport { createNewGuid, exportJwk, generateKeyPair, getRandomValues, importJwk, sha256Digest, sign, validateCryptoAvailable };","map":{"version":3,"names":["PKCS1_V15_KEYGEN_ALG","S256_HASH_ALG","MODULUS_LENGTH","PUBLIC_EXPONENT","Uint8Array","keygenAlgorithmOptions","name","hash","modulusLength","publicExponent","validateCryptoAvailable","logger","window","verbose","error","createBrowserAuthError","cryptoNonExistent","sha256Digest","dataString","performanceClient","correlationId","addQueueMeasurement","PerformanceEvents","Sha256Digest","encoder","TextEncoder","data","encode","crypto","subtle","digest","getRandomValues","dataBuffer","createNewGuid","randomUUID","generateKeyPair","extractable","usages","generateKey","exportJwk","key","exportKey","KEY_FORMAT_JWK","importJwk","importKey","sign"],"sources":["D:\\selvakumar\\java-chat-repo\\websocket-springboot-01\\Java-chatapp\\chatclient\\node_modules\\@azure\\msal-browser\\src\\crypto\\BrowserCrypto.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport {\r\n    createBrowserAuthError,\r\n    BrowserAuthErrorCodes,\r\n} from \"../error/BrowserAuthError\";\r\nimport {\r\n    IPerformanceClient,\r\n    Logger,\r\n    PerformanceEvents,\r\n} from \"@azure/msal-common\";\r\nimport { KEY_FORMAT_JWK } from \"../utils/BrowserConstants\";\r\n\r\n/**\r\n * This file defines functions used by the browser library to perform cryptography operations such as\r\n * hashing and encoding. It also has helper functions to validate the availability of specific APIs.\r\n */\r\n\r\n/**\r\n * See here for more info on RsaHashedKeyGenParams: https://developer.mozilla.org/en-US/docs/Web/API/RsaHashedKeyGenParams\r\n */\r\n// RSA KeyGen Algorithm\r\nconst PKCS1_V15_KEYGEN_ALG = \"RSASSA-PKCS1-v1_5\";\r\n// SHA-256 hashing algorithm\r\nconst S256_HASH_ALG = \"SHA-256\";\r\n// MOD length for PoP tokens\r\nconst MODULUS_LENGTH = 2048;\r\n// Public Exponent\r\nconst PUBLIC_EXPONENT: Uint8Array = new Uint8Array([0x01, 0x00, 0x01]);\r\n\r\nconst keygenAlgorithmOptions: RsaHashedKeyGenParams = {\r\n    name: PKCS1_V15_KEYGEN_ALG,\r\n    hash: S256_HASH_ALG,\r\n    modulusLength: MODULUS_LENGTH,\r\n    publicExponent: PUBLIC_EXPONENT,\r\n};\r\n\r\n/**\r\n * Check whether browser crypto is available.\r\n */\r\nexport function validateCryptoAvailable(logger: Logger): void {\r\n    if (\"crypto\" in window) {\r\n        logger.verbose(\"BrowserCrypto: modern crypto interface available\");\r\n    } else {\r\n        logger.error(\"BrowserCrypto: crypto interface is unavailable\");\r\n        throw createBrowserAuthError(BrowserAuthErrorCodes.cryptoNonExistent);\r\n    }\r\n}\r\n\r\n/**\r\n * Returns a sha-256 hash of the given dataString as an ArrayBuffer.\r\n * @param dataString\r\n */\r\nexport async function sha256Digest(\r\n    dataString: string,\r\n    performanceClient?: IPerformanceClient,\r\n    correlationId?: string\r\n): Promise<ArrayBuffer> {\r\n    performanceClient?.addQueueMeasurement(\r\n        PerformanceEvents.Sha256Digest,\r\n        correlationId\r\n    );\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(dataString);\r\n    return window.crypto.subtle.digest(\r\n        S256_HASH_ALG,\r\n        data\r\n    ) as Promise<ArrayBuffer>;\r\n}\r\n\r\n/**\r\n * Populates buffer with cryptographically random values.\r\n * @param dataBuffer\r\n */\r\nexport function getRandomValues(dataBuffer: Uint8Array): Uint8Array {\r\n    return window.crypto.getRandomValues(dataBuffer);\r\n}\r\n\r\n/**\r\n * Creates a new random GUID\r\n * @returns\r\n */\r\nexport function createNewGuid(): string {\r\n    return window.crypto.randomUUID();\r\n}\r\n\r\n/**\r\n * Generates a keypair based on current keygen algorithm config.\r\n * @param extractable\r\n * @param usages\r\n */\r\nexport async function generateKeyPair(\r\n    extractable: boolean,\r\n    usages: Array<KeyUsage>\r\n): Promise<CryptoKeyPair> {\r\n    return window.crypto.subtle.generateKey(\r\n        keygenAlgorithmOptions,\r\n        extractable,\r\n        usages\r\n    ) as Promise<CryptoKeyPair>;\r\n}\r\n\r\n/**\r\n * Export key as Json Web Key (JWK)\r\n * @param key\r\n */\r\nexport async function exportJwk(key: CryptoKey): Promise<JsonWebKey> {\r\n    return window.crypto.subtle.exportKey(\r\n        KEY_FORMAT_JWK,\r\n        key\r\n    ) as Promise<JsonWebKey>;\r\n}\r\n\r\n/**\r\n * Imports key as Json Web Key (JWK), can set extractable and usages.\r\n * @param key\r\n * @param extractable\r\n * @param usages\r\n */\r\nexport async function importJwk(\r\n    key: JsonWebKey,\r\n    extractable: boolean,\r\n    usages: Array<KeyUsage>\r\n): Promise<CryptoKey> {\r\n    return window.crypto.subtle.importKey(\r\n        KEY_FORMAT_JWK,\r\n        key,\r\n        keygenAlgorithmOptions,\r\n        extractable,\r\n        usages\r\n    ) as Promise<CryptoKey>;\r\n}\r\n\r\n/**\r\n * Signs given data with given key\r\n * @param key\r\n * @param data\r\n */\r\nexport async function sign(\r\n    key: CryptoKey,\r\n    data: ArrayBuffer\r\n): Promise<ArrayBuffer> {\r\n    return window.crypto.subtle.sign(\r\n        keygenAlgorithmOptions,\r\n        key,\r\n        data\r\n    ) as Promise<ArrayBuffer>;\r\n}\r\n"],"mappings":";;;;;;;;AAAA;;;AAGG;AAaH;;;AAGG;AAEH;;AAEG;AACH;AACA,MAAMA,oBAAoB,GAAG,mBAAmB;AAChD;AACA,MAAMC,aAAa,GAAG,SAAS;AAC/B;AACA,MAAMC,cAAc,GAAG,IAAI;AAC3B;AACA,MAAMC,eAAe,GAAe,IAAIC,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAMC,sBAAsB,GAA0B;EAClDC,IAAI,EAAEN,oBAAoB;EAC1BO,IAAI,EAAEN,aAAa;EACnBO,aAAa,EAAEN,cAAc;EAC7BO,cAAc,EAAEN;CACnB;AAED;;AAEG;AACG,SAAUO,uBAAuBA,CAACC,MAAc;EAClD,IAAI,QAAQ,IAAIC,MAAM,EAAE;IACpBD,MAAM,CAACE,OAAO,CAAC,kDAAkD,CAAC;EACrE,OAAM;IACHF,MAAM,CAACG,KAAK,CAAC,gDAAgD,CAAC;IAC9D,MAAMC,sBAAsB,CAACC,iBAAuC,CAAC;EACxE;AACL;AAEA;;;AAGG;AACI,eAAeC,YAAYA,CAC9BC,UAAkB,EAClBC,iBAAsC,EACtCC,aAAsB;EAEtBD,iBAAiB,EAAEE,mBAAmB,CAClCC,iBAAiB,CAACC,YAAY,EAC9BH,aAAa,CAChB;EACD,MAAMI,OAAO,GAAG,IAAIC,WAAW,EAAE;EACjC,MAAMC,IAAI,GAAGF,OAAO,CAACG,MAAM,CAACT,UAAU,CAAC;EACvC,OAAON,MAAM,CAACgB,MAAM,CAACC,MAAM,CAACC,MAAM,CAC9B7B,aAAa,EACbyB,IAAI,CACiB;AAC7B;AAEA;;;AAGG;AACG,SAAUK,eAAeA,CAACC,UAAsB;EAClD,OAAOpB,MAAM,CAACgB,MAAM,CAACG,eAAe,CAACC,UAAU,CAAC;AACpD;AAEA;;;AAGG;SACaC,aAAaA,CAAA;EACzB,OAAOrB,MAAM,CAACgB,MAAM,CAACM,UAAU,EAAE;AACrC;AAEA;;;;AAIG;AACI,eAAeC,eAAeA,CACjCC,WAAoB,EACpBC,MAAuB;EAEvB,OAAOzB,MAAM,CAACgB,MAAM,CAACC,MAAM,CAACS,WAAW,CACnCjC,sBAAsB,EACtB+B,WAAW,EACXC,MAAM,CACiB;AAC/B;AAEA;;;AAGG;AACI,eAAeE,SAASA,CAACC,GAAc;EAC1C,OAAO5B,MAAM,CAACgB,MAAM,CAACC,MAAM,CAACY,SAAS,CACjCC,cAAc,EACdF,GAAG,CACiB;AAC5B;AAEA;;;;;AAKG;AACI,eAAeG,SAASA,CAC3BH,GAAe,EACfJ,WAAoB,EACpBC,MAAuB;EAEvB,OAAOzB,MAAM,CAACgB,MAAM,CAACC,MAAM,CAACe,SAAS,CACjCF,cAAc,EACdF,GAAG,EACHnC,sBAAsB,EACtB+B,WAAW,EACXC,MAAM,CACa;AAC3B;AAEA;;;;AAIG;AACI,eAAeQ,IAAIA,CACtBL,GAAc,EACdd,IAAiB;EAEjB,OAAOd,MAAM,CAACgB,MAAM,CAACC,MAAM,CAACgB,IAAI,CAC5BxC,sBAAsB,EACtBmC,GAAG,EACHd,IAAI,CACiB;AAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}