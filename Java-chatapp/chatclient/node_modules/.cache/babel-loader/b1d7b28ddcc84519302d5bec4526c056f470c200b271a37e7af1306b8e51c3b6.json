{"ast":null,"code":"/*! @azure/msal-browser v3.7.0 2024-01-09 */\n'use strict';\n\nimport { UrlUtils } from '@azure/msal-common';\nimport { createBrowserAuthError } from '../error/BrowserAuthError.mjs';\nimport { extractBrowserRequestState } from '../utils/BrowserProtocolUtils.mjs';\nimport { hashEmptyError, hashDoesNotContainKnownProperties, noStateInHash, unableToParseState, stateInteractionTypeMismatch } from '../error/BrowserAuthErrorCodes.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nfunction deserializeResponse(responseString, responseLocation, logger) {\n  // Deserialize hash fragment response parameters.\n  const serverParams = UrlUtils.getDeserializedResponse(responseString);\n  if (!serverParams) {\n    if (!UrlUtils.stripLeadingHashOrQuery(responseString)) {\n      // Hash or Query string is empty\n      logger.error(`The request has returned to the redirectUri but a ${responseLocation} is not present. It's likely that the ${responseLocation} has been removed or the page has been redirected by code running on the redirectUri page.`);\n      throw createBrowserAuthError(hashEmptyError);\n    } else {\n      logger.error(`A ${responseLocation} is present in the iframe but it does not contain known properties. It's likely that the ${responseLocation} has been replaced by code running on the redirectUri page.`);\n      logger.errorPii(`The ${responseLocation} detected is: ${responseString}`);\n      throw createBrowserAuthError(hashDoesNotContainKnownProperties);\n    }\n  }\n  return serverParams;\n}\n/**\r\n * Returns the interaction type that the response object belongs to\r\n */\nfunction validateInteractionType(response, browserCrypto, interactionType) {\n  if (!response.state) {\n    throw createBrowserAuthError(noStateInHash);\n  }\n  const platformStateObj = extractBrowserRequestState(browserCrypto, response.state);\n  if (!platformStateObj) {\n    throw createBrowserAuthError(unableToParseState);\n  }\n  if (platformStateObj.interactionType !== interactionType) {\n    throw createBrowserAuthError(stateInteractionTypeMismatch);\n  }\n}\nexport { deserializeResponse, validateInteractionType };","map":{"version":3,"names":["deserializeResponse","responseString","responseLocation","logger","serverParams","UrlUtils","getDeserializedResponse","stripLeadingHashOrQuery","error","createBrowserAuthError","hashEmptyError","errorPii","hashDoesNotContainKnownProperties","validateInteractionType","response","browserCrypto","interactionType","state","noStateInHash","platformStateObj","extractBrowserRequestState","unableToParseState","stateInteractionTypeMismatch"],"sources":["D:\\selvakumar\\java-chat-repo\\websocket-springboot-01\\Java-chatapp\\chatclient\\node_modules\\@azure\\msal-browser\\src\\response\\ResponseHandler.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport {\r\n    ICrypto,\r\n    Logger,\r\n    ServerAuthorizationCodeResponse,\r\n    UrlUtils,\r\n} from \"@azure/msal-common\";\r\nimport {\r\n    BrowserAuthErrorCodes,\r\n    createBrowserAuthError,\r\n} from \"../error/BrowserAuthError\";\r\nimport { extractBrowserRequestState } from \"../utils/BrowserProtocolUtils\";\r\nimport { InteractionType } from \"../utils/BrowserConstants\";\r\n\r\nexport function deserializeResponse(\r\n    responseString: string,\r\n    responseLocation: string,\r\n    logger: Logger\r\n): ServerAuthorizationCodeResponse {\r\n    // Deserialize hash fragment response parameters.\r\n    const serverParams = UrlUtils.getDeserializedResponse(responseString);\r\n    if (!serverParams) {\r\n        if (!UrlUtils.stripLeadingHashOrQuery(responseString)) {\r\n            // Hash or Query string is empty\r\n            logger.error(\r\n                `The request has returned to the redirectUri but a ${responseLocation} is not present. It's likely that the ${responseLocation} has been removed or the page has been redirected by code running on the redirectUri page.`\r\n            );\r\n            throw createBrowserAuthError(BrowserAuthErrorCodes.hashEmptyError);\r\n        } else {\r\n            logger.error(\r\n                `A ${responseLocation} is present in the iframe but it does not contain known properties. It's likely that the ${responseLocation} has been replaced by code running on the redirectUri page.`\r\n            );\r\n            logger.errorPii(\r\n                `The ${responseLocation} detected is: ${responseString}`\r\n            );\r\n            throw createBrowserAuthError(\r\n                BrowserAuthErrorCodes.hashDoesNotContainKnownProperties\r\n            );\r\n        }\r\n    }\r\n    return serverParams;\r\n}\r\n\r\n/**\r\n * Returns the interaction type that the response object belongs to\r\n */\r\nexport function validateInteractionType(\r\n    response: ServerAuthorizationCodeResponse,\r\n    browserCrypto: ICrypto,\r\n    interactionType: InteractionType\r\n): void {\r\n    if (!response.state) {\r\n        throw createBrowserAuthError(BrowserAuthErrorCodes.noStateInHash);\r\n    }\r\n\r\n    const platformStateObj = extractBrowserRequestState(\r\n        browserCrypto,\r\n        response.state\r\n    );\r\n    if (!platformStateObj) {\r\n        throw createBrowserAuthError(BrowserAuthErrorCodes.unableToParseState);\r\n    }\r\n\r\n    if (platformStateObj.interactionType !== interactionType) {\r\n        throw createBrowserAuthError(\r\n            BrowserAuthErrorCodes.stateInteractionTypeMismatch\r\n        );\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;AAAA;;;AAGG;SAeaA,mBAAmBA,CAC/BC,cAAsB,EACtBC,gBAAwB,EACxBC,MAAc;;EAGd,MAAMC,YAAY,GAAGC,QAAQ,CAACC,uBAAuB,CAACL,cAAc,CAAC;EACrE,IAAI,CAACG,YAAY,EAAE;IACf,IAAI,CAACC,QAAQ,CAACE,uBAAuB,CAACN,cAAc,CAAC,EAAE;;MAEnDE,MAAM,CAACK,KAAK,CACR,qDAAqDN,gBAAyD,yCAAAA,gBAA4G,6FAC7N;MACD,MAAMO,sBAAsB,CAACC,cAAoC,CAAC;IACrE,OAAM;MACHP,MAAM,CAACK,KAAK,CACR,KAAKN,gBAA4G,4FAAAA,gBAA6E,8DACjM;MACDC,MAAM,CAACQ,QAAQ,CACX,OAAOT,gBAAiC,iBAAAD,cAAgB,GAC3D;MACD,MAAMQ,sBAAsB,CACxBG,iCAAuD,CAC1D;IACJ;EACJ;EACD,OAAOR,YAAY;AACvB;AAEA;;AAEG;SACaS,uBAAuBA,CACnCC,QAAyC,EACzCC,aAAsB,EACtBC,eAAgC;EAEhC,IAAI,CAACF,QAAQ,CAACG,KAAK,EAAE;IACjB,MAAMR,sBAAsB,CAACS,aAAmC,CAAC;EACpE;EAED,MAAMC,gBAAgB,GAAGC,0BAA0B,CAC/CL,aAAa,EACbD,QAAQ,CAACG,KAAK,CACjB;EACD,IAAI,CAACE,gBAAgB,EAAE;IACnB,MAAMV,sBAAsB,CAACY,kBAAwC,CAAC;EACzE;EAED,IAAIF,gBAAgB,CAACH,eAAe,KAAKA,eAAe,EAAE;IACtD,MAAMP,sBAAsB,CACxBa,4BAAkD,CACrD;EACJ;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}