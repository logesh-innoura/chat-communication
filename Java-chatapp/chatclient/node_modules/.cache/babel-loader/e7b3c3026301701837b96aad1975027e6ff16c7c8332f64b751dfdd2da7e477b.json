{"ast":null,"code":"/*! @azure/msal-browser v3.7.0 2024-01-09 */\n'use strict';\n\nimport { DEFAULT_CRYPTO_IMPLEMENTATION, PerformanceEvents, TimeUtils } from '@azure/msal-common';\nimport { InteractionType } from '../utils/BrowserConstants.mjs';\nimport { CryptoOps } from '../crypto/CryptoOps.mjs';\nimport { NestedAppAuthAdapter } from '../naa/mapping/NestedAppAuthAdapter.mjs';\nimport { NestedAppAuthError } from '../error/NestedAppAuthError.mjs';\nimport { EventHandler } from '../event/EventHandler.mjs';\nimport { EventType } from '../event/EventType.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nclass NestedAppAuthController {\n  constructor(operatingContext) {\n    this.operatingContext = operatingContext;\n    const proxy = this.operatingContext.getBridgeProxy();\n    if (proxy !== undefined) {\n      this.bridgeProxy = proxy;\n    } else {\n      throw new Error(\"unexpected: bridgeProxy is undefined\");\n    }\n    // Set the configuration.\n    this.config = operatingContext.getConfig();\n    // Initialize logger\n    this.logger = this.operatingContext.getLogger();\n    // Initialize performance client\n    this.performanceClient = this.config.telemetry.client;\n    // Initialize the crypto class.\n    this.browserCrypto = operatingContext.isBrowserEnvironment() ? new CryptoOps(this.logger, this.performanceClient) : DEFAULT_CRYPTO_IMPLEMENTATION;\n    this.eventHandler = new EventHandler(this.logger, this.browserCrypto);\n    this.nestedAppAuthAdapter = new NestedAppAuthAdapter(this.config.auth.clientId, this.config.auth.clientCapabilities, this.browserCrypto, this.logger);\n  }\n  getBrowserStorage() {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  getEventHandler() {\n    return this.eventHandler;\n  }\n  static async createController(operatingContext) {\n    const controller = new NestedAppAuthController(operatingContext);\n    return Promise.resolve(controller);\n  }\n  initialize() {\n    // do nothing not required by this controller\n    return Promise.resolve();\n  }\n  async acquireTokenInteractive(request) {\n    this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START, InteractionType.Popup, request);\n    const atPopupMeasurement = this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPopup, request.correlationId);\n    atPopupMeasurement?.add({\n      nestedAppAuthRequest: true\n    });\n    try {\n      const naaRequest = this.nestedAppAuthAdapter.toNaaTokenRequest(request);\n      const reqTimestamp = TimeUtils.nowSeconds();\n      const response = await this.bridgeProxy.getTokenInteractive(naaRequest);\n      const result = this.nestedAppAuthAdapter.fromNaaTokenResponse(naaRequest, response, reqTimestamp);\n      this.operatingContext.setActiveAccount(result.account);\n      this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS, InteractionType.Popup, result);\n      atPopupMeasurement.add({\n        accessTokenSize: result.accessToken.length,\n        idTokenSize: result.idToken.length\n      });\n      atPopupMeasurement.end({\n        success: true,\n        requestId: result.requestId\n      });\n      return result;\n    } catch (e) {\n      const error = this.nestedAppAuthAdapter.fromBridgeError(e);\n      this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE, InteractionType.Popup, null, e);\n      atPopupMeasurement.end({\n        errorCode: error.errorCode,\n        subErrorCode: error.subError,\n        success: false\n      });\n      throw error;\n    }\n  }\n  async acquireTokenSilentInternal(request) {\n    this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START, InteractionType.Silent, request);\n    const ssoSilentMeasurement = this.performanceClient.startMeasurement(PerformanceEvents.SsoSilent, request.correlationId);\n    ssoSilentMeasurement?.increment({\n      visibilityChangeCount: 0\n    });\n    ssoSilentMeasurement?.add({\n      nestedAppAuthRequest: true\n    });\n    try {\n      const naaRequest = this.nestedAppAuthAdapter.toNaaTokenRequest(request);\n      const reqTimestamp = TimeUtils.nowSeconds();\n      const response = await this.bridgeProxy.getTokenSilent(naaRequest);\n      const result = this.nestedAppAuthAdapter.fromNaaTokenResponse(naaRequest, response, reqTimestamp);\n      this.operatingContext.setActiveAccount(result.account);\n      this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS, InteractionType.Silent, result);\n      ssoSilentMeasurement?.add({\n        accessTokenSize: result.accessToken.length,\n        idTokenSize: result.idToken.length\n      });\n      ssoSilentMeasurement?.end({\n        success: true,\n        requestId: result.requestId\n      });\n      return result;\n    } catch (e) {\n      const error = this.nestedAppAuthAdapter.fromBridgeError(e);\n      this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE, InteractionType.Silent, null, e);\n      ssoSilentMeasurement?.end({\n        errorCode: error.errorCode,\n        subErrorCode: error.subError,\n        success: false\n      });\n      throw error;\n    }\n  }\n  async acquireTokenPopup(request) {\n    return this.acquireTokenInteractive(request);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  acquireTokenRedirect(request) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  async acquireTokenSilent(silentRequest) {\n    return this.acquireTokenSilentInternal(silentRequest);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  acquireTokenByCode(request // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  acquireTokenNative(request, apiId,\n  // eslint-disable-line @typescript-eslint/no-unused-vars\n  accountId // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  acquireTokenByRefreshToken(commonRequest,\n  // eslint-disable-line @typescript-eslint/no-unused-vars\n  silentRequest // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  /**\r\n   * Adds event callbacks to array\r\n   * @param callback\r\n   */\n  addEventCallback(callback) {\n    return this.eventHandler.addEventCallback(callback);\n  }\n  /**\r\n   * Removes callback with provided id from callback array\r\n   * @param callbackId\r\n   */\n  removeEventCallback(callbackId) {\n    this.eventHandler.removeEventCallback(callbackId);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  addPerformanceCallback(callback) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  removePerformanceCallback(callbackId) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  enableAccountStorageEvents() {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  disableAccountStorageEvents() {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAccount(accountFilter) {\n    throw NestedAppAuthError.createUnsupportedError();\n    // TODO: Look at standard implementation\n  }\n  getAccountByHomeId(homeAccountId) {\n    const currentAccount = this.operatingContext.getActiveAccount();\n    if (currentAccount !== undefined) {\n      if (currentAccount.homeAccountId === homeAccountId) {\n        return this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount);\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n  getAccountByLocalId(localId) {\n    const currentAccount = this.operatingContext.getActiveAccount();\n    if (currentAccount !== undefined) {\n      if (currentAccount.localAccountId === localId) {\n        return this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount);\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n  getAccountByUsername(userName) {\n    const currentAccount = this.operatingContext.getActiveAccount();\n    if (currentAccount !== undefined) {\n      if (currentAccount.username === userName) {\n        return this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount);\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n  getAllAccounts() {\n    const currentAccount = this.operatingContext.getActiveAccount();\n    if (currentAccount !== undefined) {\n      return [this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount)];\n    } else {\n      return [];\n    }\n  }\n  handleRedirectPromise(hash // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  loginPopup(request // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    if (request !== undefined) {\n      return this.acquireTokenInteractive(request);\n    } else {\n      throw NestedAppAuthError.createUnsupportedError();\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  loginRedirect(request) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  logout(logoutRequest) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  logoutRedirect(logoutRequest // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  logoutPopup(logoutRequest // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  ssoSilent(\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  request) {\n    return this.acquireTokenSilentInternal(request);\n  }\n  getTokenCache() {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  /**\r\n   * Returns the logger instance\r\n   */\n  getLogger() {\n    return this.logger;\n  }\n  /**\r\n   * Replaces the default logger set in configurations with new Logger with new configurations\r\n   * @param logger Logger instance\r\n   */\n  setLogger(logger) {\n    this.logger = logger;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  setActiveAccount(account) {\n    /*\r\n     * StandardController uses this to allow the developer to set the active account\r\n     * in the nested app auth scenario the active account is controlled by the app hosting the nested app\r\n     */\n    this.logger.warning(\"nestedAppAuth does not support setActiveAccount\");\n    return;\n  }\n  getActiveAccount() {\n    const currentAccount = this.operatingContext.getActiveAccount();\n    if (currentAccount !== undefined) {\n      return this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount);\n    } else {\n      return null;\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  initializeWrapperLibrary(sku, version) {\n    /*\r\n     * Standard controller uses this to set the sku and version of the wrapper library in the storage\r\n     * we do nothing here\r\n     */\n    return;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  setNavigationClient(navigationClient) {\n    this.logger.warning(\"setNavigationClient is not supported in nested app auth\");\n  }\n  getConfiguration() {\n    return this.config;\n  }\n  isBrowserEnv() {\n    return this.operatingContext.isBrowserEnvironment();\n  }\n  getBrowserCrypto() {\n    return this.browserCrypto;\n  }\n  getPerformanceClient() {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  getRedirectResponse() {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  preflightBrowserEnvironmentCheck(interactionType,\n  // eslint-disable-line @typescript-eslint/no-unused-vars\n  setInteractionInProgress // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async clearCache(logoutRequest) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async hydrateCache(\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  result,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  request) {\n    throw NestedAppAuthError.createUnsupportedError();\n  }\n}\nexport { NestedAppAuthController };","map":{"version":3,"names":["NestedAppAuthController","constructor","operatingContext","proxy","getBridgeProxy","undefined","bridgeProxy","Error","config","getConfig","logger","getLogger","performanceClient","telemetry","client","browserCrypto","isBrowserEnvironment","CryptoOps","DEFAULT_CRYPTO_IMPLEMENTATION","eventHandler","EventHandler","nestedAppAuthAdapter","NestedAppAuthAdapter","auth","clientId","clientCapabilities","getBrowserStorage","NestedAppAuthError","createUnsupportedError","getEventHandler","createController","controller","Promise","resolve","initialize","acquireTokenInteractive","request","emitEvent","EventType","ACQUIRE_TOKEN_START","InteractionType","Popup","atPopupMeasurement","startMeasurement","PerformanceEvents","AcquireTokenPopup","correlationId","add","nestedAppAuthRequest","naaRequest","toNaaTokenRequest","reqTimestamp","TimeUtils","nowSeconds","response","getTokenInteractive","result","fromNaaTokenResponse","setActiveAccount","account","ACQUIRE_TOKEN_SUCCESS","accessTokenSize","accessToken","length","idTokenSize","idToken","end","success","requestId","e","error","fromBridgeError","ACQUIRE_TOKEN_FAILURE","errorCode","subErrorCode","subError","acquireTokenSilentInternal","Silent","ssoSilentMeasurement","SsoSilent","increment","visibilityChangeCount","getTokenSilent","acquireTokenPopup","acquireTokenRedirect","acquireTokenSilent","silentRequest","acquireTokenByCode","acquireTokenNative","apiId","accountId","acquireTokenByRefreshToken","commonRequest","addEventCallback","callback","removeEventCallback","callbackId","addPerformanceCallback","removePerformanceCallback","enableAccountStorageEvents","disableAccountStorageEvents","getAccount","accountFilter","getAccountByHomeId","homeAccountId","currentAccount","getActiveAccount","fromNaaAccountInfo","getAccountByLocalId","localId","localAccountId","getAccountByUsername","userName","username","getAllAccounts","handleRedirectPromise","hash","loginPopup","loginRedirect","logout","logoutRequest","logoutRedirect","logoutPopup","ssoSilent","getTokenCache","setLogger","warning","initializeWrapperLibrary","sku","version","setNavigationClient","navigationClient","getConfiguration","isBrowserEnv","getBrowserCrypto","getPerformanceClient","getRedirectResponse","preflightBrowserEnvironmentCheck","interactionType","setInteractionInProgress","clearCache","hydrateCache"],"sources":["D:\\selvakumar\\java-chat-repo\\websocket-springboot-01\\Java-chatapp\\chatclient\\node_modules\\@azure\\msal-browser\\src\\controllers\\NestedAppAuthController.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport {\r\n    CommonAuthorizationUrlRequest,\r\n    CommonSilentFlowRequest,\r\n    PerformanceCallbackFunction,\r\n    AccountInfo,\r\n    Logger,\r\n    ICrypto,\r\n    IPerformanceClient,\r\n    DEFAULT_CRYPTO_IMPLEMENTATION,\r\n    PerformanceEvents,\r\n    AccountFilter,\r\n    TimeUtils,\r\n} from \"@azure/msal-common\";\r\nimport { ITokenCache } from \"../cache/ITokenCache\";\r\nimport { BrowserConfiguration } from \"../config/Configuration\";\r\nimport { INavigationClient } from \"../navigation/INavigationClient\";\r\nimport { AuthorizationCodeRequest } from \"../request/AuthorizationCodeRequest\";\r\nimport { EndSessionPopupRequest } from \"../request/EndSessionPopupRequest\";\r\nimport { EndSessionRequest } from \"../request/EndSessionRequest\";\r\nimport { PopupRequest } from \"../request/PopupRequest\";\r\nimport { RedirectRequest } from \"../request/RedirectRequest\";\r\nimport { SilentRequest } from \"../request/SilentRequest\";\r\nimport { SsoSilentRequest } from \"../request/SsoSilentRequest\";\r\nimport { ApiId, WrapperSKU, InteractionType } from \"../utils/BrowserConstants\";\r\nimport { IController } from \"./IController\";\r\nimport { TeamsAppOperatingContext } from \"../operatingcontext/TeamsAppOperatingContext\";\r\nimport { IBridgeProxy } from \"../naa/IBridgeProxy\";\r\nimport { CryptoOps } from \"../crypto/CryptoOps\";\r\nimport { NestedAppAuthAdapter } from \"../naa/mapping/NestedAppAuthAdapter\";\r\nimport { NestedAppAuthError } from \"../error/NestedAppAuthError\";\r\nimport { EventHandler } from \"../event/EventHandler\";\r\nimport { EventType } from \"../event/EventType\";\r\nimport { EventCallbackFunction, EventError } from \"../event/EventMessage\";\r\nimport { AuthenticationResult } from \"../response/AuthenticationResult\";\r\nimport { BrowserCacheManager } from \"../cache/BrowserCacheManager\";\r\nimport { ClearCacheRequest } from \"../request/ClearCacheRequest\";\r\n\r\nexport class NestedAppAuthController implements IController {\r\n    // OperatingContext\r\n    protected readonly operatingContext: TeamsAppOperatingContext;\r\n\r\n    // BridgeProxy\r\n    protected readonly bridgeProxy: IBridgeProxy;\r\n\r\n    // Crypto interface implementation\r\n    protected readonly browserCrypto: ICrypto;\r\n\r\n    // Input configuration by developer/user\r\n    protected readonly config: BrowserConfiguration;\r\n\r\n    // Logger\r\n    protected logger: Logger;\r\n\r\n    // Performance telemetry client\r\n    protected readonly performanceClient: IPerformanceClient;\r\n\r\n    // EventHandler\r\n    protected readonly eventHandler: EventHandler;\r\n\r\n    // NestedAppAuthAdapter\r\n    protected readonly nestedAppAuthAdapter: NestedAppAuthAdapter;\r\n\r\n    constructor(operatingContext: TeamsAppOperatingContext) {\r\n        this.operatingContext = operatingContext;\r\n        const proxy = this.operatingContext.getBridgeProxy();\r\n        if (proxy !== undefined) {\r\n            this.bridgeProxy = proxy;\r\n        } else {\r\n            throw new Error(\"unexpected: bridgeProxy is undefined\");\r\n        }\r\n\r\n        // Set the configuration.\r\n        this.config = operatingContext.getConfig();\r\n\r\n        // Initialize logger\r\n        this.logger = this.operatingContext.getLogger();\r\n        // Initialize performance client\r\n        this.performanceClient = this.config.telemetry.client;\r\n\r\n        // Initialize the crypto class.\r\n        this.browserCrypto = operatingContext.isBrowserEnvironment()\r\n            ? new CryptoOps(this.logger, this.performanceClient)\r\n            : DEFAULT_CRYPTO_IMPLEMENTATION;\r\n\r\n        this.eventHandler = new EventHandler(this.logger, this.browserCrypto);\r\n\r\n        this.nestedAppAuthAdapter = new NestedAppAuthAdapter(\r\n            this.config.auth.clientId,\r\n            this.config.auth.clientCapabilities,\r\n            this.browserCrypto,\r\n            this.logger\r\n        );\r\n    }\r\n    getBrowserStorage(): BrowserCacheManager {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    getEventHandler(): EventHandler {\r\n        return this.eventHandler;\r\n    }\r\n\r\n    static async createController(\r\n        operatingContext: TeamsAppOperatingContext\r\n    ): Promise<IController> {\r\n        const controller = new NestedAppAuthController(operatingContext);\r\n        return Promise.resolve(controller);\r\n    }\r\n\r\n    initialize(): Promise<void> {\r\n        // do nothing not required by this controller\r\n        return Promise.resolve();\r\n    }\r\n\r\n    private async acquireTokenInteractive(\r\n        request: PopupRequest | RedirectRequest\r\n    ): Promise<AuthenticationResult> {\r\n        this.eventHandler.emitEvent(\r\n            EventType.ACQUIRE_TOKEN_START,\r\n            InteractionType.Popup,\r\n            request\r\n        );\r\n\r\n        const atPopupMeasurement = this.performanceClient.startMeasurement(\r\n            PerformanceEvents.AcquireTokenPopup,\r\n            request.correlationId\r\n        );\r\n\r\n        atPopupMeasurement?.add({ nestedAppAuthRequest: true });\r\n\r\n        try {\r\n            const naaRequest =\r\n                this.nestedAppAuthAdapter.toNaaTokenRequest(request);\r\n            const reqTimestamp = TimeUtils.nowSeconds();\r\n            const response = await this.bridgeProxy.getTokenInteractive(\r\n                naaRequest\r\n            );\r\n            const result: AuthenticationResult =\r\n                this.nestedAppAuthAdapter.fromNaaTokenResponse(\r\n                    naaRequest,\r\n                    response,\r\n                    reqTimestamp\r\n                );\r\n\r\n            this.operatingContext.setActiveAccount(result.account);\r\n            this.eventHandler.emitEvent(\r\n                EventType.ACQUIRE_TOKEN_SUCCESS,\r\n                InteractionType.Popup,\r\n                result\r\n            );\r\n\r\n            atPopupMeasurement.add({\r\n                accessTokenSize: result.accessToken.length,\r\n                idTokenSize: result.idToken.length,\r\n            });\r\n\r\n            atPopupMeasurement.end({\r\n                success: true,\r\n                requestId: result.requestId,\r\n            });\r\n\r\n            return result;\r\n        } catch (e) {\r\n            const error = this.nestedAppAuthAdapter.fromBridgeError(e);\r\n            this.eventHandler.emitEvent(\r\n                EventType.ACQUIRE_TOKEN_FAILURE,\r\n                InteractionType.Popup,\r\n                null,\r\n                e as EventError\r\n            );\r\n\r\n            atPopupMeasurement.end({\r\n                errorCode: error.errorCode,\r\n                subErrorCode: error.subError,\r\n                success: false,\r\n            });\r\n\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    private async acquireTokenSilentInternal(\r\n        request: SilentRequest\r\n    ): Promise<AuthenticationResult> {\r\n        this.eventHandler.emitEvent(\r\n            EventType.ACQUIRE_TOKEN_START,\r\n            InteractionType.Silent,\r\n            request\r\n        );\r\n\r\n        const ssoSilentMeasurement = this.performanceClient.startMeasurement(\r\n            PerformanceEvents.SsoSilent,\r\n            request.correlationId\r\n        );\r\n\r\n        ssoSilentMeasurement?.increment({\r\n            visibilityChangeCount: 0,\r\n        });\r\n\r\n        ssoSilentMeasurement?.add({\r\n            nestedAppAuthRequest: true,\r\n        });\r\n\r\n        try {\r\n            const naaRequest =\r\n                this.nestedAppAuthAdapter.toNaaTokenRequest(request);\r\n            const reqTimestamp = TimeUtils.nowSeconds();\r\n            const response = await this.bridgeProxy.getTokenSilent(naaRequest);\r\n\r\n            const result: AuthenticationResult =\r\n                this.nestedAppAuthAdapter.fromNaaTokenResponse(\r\n                    naaRequest,\r\n                    response,\r\n                    reqTimestamp\r\n                );\r\n\r\n            this.operatingContext.setActiveAccount(result.account);\r\n            this.eventHandler.emitEvent(\r\n                EventType.ACQUIRE_TOKEN_SUCCESS,\r\n                InteractionType.Silent,\r\n                result\r\n            );\r\n            ssoSilentMeasurement?.add({\r\n                accessTokenSize: result.accessToken.length,\r\n                idTokenSize: result.idToken.length,\r\n            });\r\n            ssoSilentMeasurement?.end({\r\n                success: true,\r\n                requestId: result.requestId,\r\n            });\r\n            return result;\r\n        } catch (e) {\r\n            const error = this.nestedAppAuthAdapter.fromBridgeError(e);\r\n            this.eventHandler.emitEvent(\r\n                EventType.ACQUIRE_TOKEN_FAILURE,\r\n                InteractionType.Silent,\r\n                null,\r\n                e as EventError\r\n            );\r\n            ssoSilentMeasurement?.end({\r\n                errorCode: error.errorCode,\r\n                subErrorCode: error.subError,\r\n                success: false,\r\n            });\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async acquireTokenPopup(\r\n        request: PopupRequest\r\n    ): Promise<AuthenticationResult> {\r\n        return this.acquireTokenInteractive(request);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    acquireTokenRedirect(request: RedirectRequest): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    async acquireTokenSilent(\r\n        silentRequest: SilentRequest\r\n    ): Promise<AuthenticationResult> {\r\n        return this.acquireTokenSilentInternal(silentRequest);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    acquireTokenByCode(\r\n        request: AuthorizationCodeRequest // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<AuthenticationResult> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    acquireTokenNative(\r\n        request: // eslint-disable-line @typescript-eslint/no-unused-vars\r\n        | SilentRequest\r\n            | Partial<\r\n                  Omit<\r\n                      CommonAuthorizationUrlRequest,\r\n                      | \"requestedClaimsHash\"\r\n                      | \"responseMode\"\r\n                      | \"codeChallenge\"\r\n                      | \"codeChallengeMethod\"\r\n                      | \"nativeBroker\"\r\n                  >\r\n              >\r\n            | PopupRequest,\r\n        apiId: ApiId, // eslint-disable-line @typescript-eslint/no-unused-vars\r\n        accountId?: string | undefined // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<AuthenticationResult> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    acquireTokenByRefreshToken(\r\n        commonRequest: CommonSilentFlowRequest, // eslint-disable-line @typescript-eslint/no-unused-vars\r\n        silentRequest: SilentRequest // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<AuthenticationResult> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    /**\r\n     * Adds event callbacks to array\r\n     * @param callback\r\n     */\r\n    addEventCallback(callback: EventCallbackFunction): string | null {\r\n        return this.eventHandler.addEventCallback(callback);\r\n    }\r\n\r\n    /**\r\n     * Removes callback with provided id from callback array\r\n     * @param callbackId\r\n     */\r\n    removeEventCallback(callbackId: string): void {\r\n        this.eventHandler.removeEventCallback(callbackId);\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    addPerformanceCallback(callback: PerformanceCallbackFunction): string {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    removePerformanceCallback(callbackId: string): boolean {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    enableAccountStorageEvents(): void {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    disableAccountStorageEvents(): void {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    getAccount(accountFilter: AccountFilter): AccountInfo | null {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n        // TODO: Look at standard implementation\r\n    }\r\n\r\n    getAccountByHomeId(homeAccountId: string): AccountInfo | null {\r\n        const currentAccount = this.operatingContext.getActiveAccount();\r\n        if (currentAccount !== undefined) {\r\n            if (currentAccount.homeAccountId === homeAccountId) {\r\n                return this.nestedAppAuthAdapter.fromNaaAccountInfo(\r\n                    currentAccount\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getAccountByLocalId(localId: string): AccountInfo | null {\r\n        const currentAccount = this.operatingContext.getActiveAccount();\r\n        if (currentAccount !== undefined) {\r\n            if (currentAccount.localAccountId === localId) {\r\n                return this.nestedAppAuthAdapter.fromNaaAccountInfo(\r\n                    currentAccount\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getAccountByUsername(userName: string): AccountInfo | null {\r\n        const currentAccount = this.operatingContext.getActiveAccount();\r\n        if (currentAccount !== undefined) {\r\n            if (currentAccount.username === userName) {\r\n                return this.nestedAppAuthAdapter.fromNaaAccountInfo(\r\n                    currentAccount\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    getAllAccounts(): AccountInfo[] {\r\n        const currentAccount = this.operatingContext.getActiveAccount();\r\n        if (currentAccount !== undefined) {\r\n            return [\r\n                this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount),\r\n            ];\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n    handleRedirectPromise(\r\n        hash?: string | undefined // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<AuthenticationResult | null> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    loginPopup(\r\n        request?: PopupRequest | undefined // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<AuthenticationResult> {\r\n        if (request !== undefined) {\r\n            return this.acquireTokenInteractive(request);\r\n        } else {\r\n            throw NestedAppAuthError.createUnsupportedError();\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    loginRedirect(request?: RedirectRequest | undefined): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    logout(logoutRequest?: EndSessionRequest | undefined): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    logoutRedirect(\r\n        logoutRequest?: EndSessionRequest | undefined // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    logoutPopup(\r\n        logoutRequest?: EndSessionPopupRequest | undefined // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    ssoSilent(\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        request: Partial<\r\n            Omit<\r\n                CommonAuthorizationUrlRequest,\r\n                | \"requestedClaimsHash\"\r\n                | \"responseMode\"\r\n                | \"codeChallenge\"\r\n                | \"codeChallengeMethod\"\r\n                | \"nativeBroker\"\r\n            >\r\n        >\r\n    ): Promise<AuthenticationResult> {\r\n        return this.acquireTokenSilentInternal(request as SilentRequest);\r\n    }\r\n    getTokenCache(): ITokenCache {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    /**\r\n     * Returns the logger instance\r\n     */\r\n    public getLogger(): Logger {\r\n        return this.logger;\r\n    }\r\n\r\n    /**\r\n     * Replaces the default logger set in configurations with new Logger with new configurations\r\n     * @param logger Logger instance\r\n     */\r\n    setLogger(logger: Logger): void {\r\n        this.logger = logger;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    setActiveAccount(account: AccountInfo | null): void {\r\n        /*\r\n         * StandardController uses this to allow the developer to set the active account\r\n         * in the nested app auth scenario the active account is controlled by the app hosting the nested app\r\n         */\r\n        this.logger.warning(\"nestedAppAuth does not support setActiveAccount\");\r\n        return;\r\n    }\r\n    getActiveAccount(): AccountInfo | null {\r\n        const currentAccount = this.operatingContext.getActiveAccount();\r\n        if (currentAccount !== undefined) {\r\n            return this.nestedAppAuthAdapter.fromNaaAccountInfo(currentAccount);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    initializeWrapperLibrary(sku: WrapperSKU, version: string): void {\r\n        /*\r\n         * Standard controller uses this to set the sku and version of the wrapper library in the storage\r\n         * we do nothing here\r\n         */\r\n        return;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    setNavigationClient(navigationClient: INavigationClient): void {\r\n        this.logger.warning(\r\n            \"setNavigationClient is not supported in nested app auth\"\r\n        );\r\n    }\r\n    getConfiguration(): BrowserConfiguration {\r\n        return this.config;\r\n    }\r\n    isBrowserEnv(): boolean {\r\n        return this.operatingContext.isBrowserEnvironment();\r\n    }\r\n    getBrowserCrypto(): ICrypto {\r\n        return this.browserCrypto;\r\n    }\r\n    getPerformanceClient(): IPerformanceClient {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    getRedirectResponse(): Map<string, Promise<AuthenticationResult | null>> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n    preflightBrowserEnvironmentCheck(\r\n        interactionType: InteractionType, // eslint-disable-line @typescript-eslint/no-unused-vars\r\n        setInteractionInProgress?: boolean | undefined // eslint-disable-line @typescript-eslint/no-unused-vars\r\n    ): void {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    async clearCache(logoutRequest?: ClearCacheRequest): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    async hydrateCache(\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        result: AuthenticationResult,\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        request:\r\n            | SilentRequest\r\n            | SsoSilentRequest\r\n            | RedirectRequest\r\n            | PopupRequest\r\n    ): Promise<void> {\r\n        throw NestedAppAuthError.createUnsupportedError();\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}