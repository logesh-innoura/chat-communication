{"ast":null,"code":"/*! @azure/msal-browser v3.7.0 2024-01-09 */\n'use strict';\n\nimport { CryptoOps } from './CryptoOps.mjs';\nimport { Logger, PopTokenGenerator } from '@azure/msal-common';\nimport { name, version } from '../packageMetadata.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nclass SignedHttpRequest {\n  constructor(shrParameters, shrOptions) {\n    const loggerOptions = shrOptions && shrOptions.loggerOptions || {};\n    this.logger = new Logger(loggerOptions, name, version);\n    this.cryptoOps = new CryptoOps(this.logger);\n    this.popTokenGenerator = new PopTokenGenerator(this.cryptoOps);\n    this.shrParameters = shrParameters;\n  }\n  /**\r\n   * Generates and caches a keypair for the given request options.\r\n   * @returns Public key digest, which should be sent to the token issuer.\r\n   */\n  async generatePublicKeyThumbprint() {\n    const {\n      kid\n    } = await this.popTokenGenerator.generateKid(this.shrParameters);\n    return kid;\n  }\n  /**\r\n   * Generates a signed http request for the given payload with the given key.\r\n   * @param payload Payload to sign (e.g. access token)\r\n   * @param publicKeyThumbprint Public key digest (from generatePublicKeyThumbprint API)\r\n   * @param claims Additional claims to include/override in the signed JWT\r\n   * @returns Pop token signed with the corresponding private key\r\n   */\n  async signRequest(payload, publicKeyThumbprint, claims) {\n    return this.popTokenGenerator.signPayload(payload, publicKeyThumbprint, this.shrParameters, claims);\n  }\n  /**\r\n   * Removes cached keys from browser for given public key thumbprint\r\n   * @param publicKeyThumbprint Public key digest (from generatePublicKeyThumbprint API)\r\n   * @returns If keys are properly deleted\r\n   */\n  async removeKeys(publicKeyThumbprint) {\n    return this.cryptoOps.removeTokenBindingKey(publicKeyThumbprint);\n  }\n}\nexport { SignedHttpRequest };","map":{"version":3,"names":["SignedHttpRequest","constructor","shrParameters","shrOptions","loggerOptions","logger","Logger","name","version","cryptoOps","CryptoOps","popTokenGenerator","PopTokenGenerator","generatePublicKeyThumbprint","kid","generateKid","signRequest","payload","publicKeyThumbprint","claims","signPayload","removeKeys","removeTokenBindingKey"],"sources":["D:\\selvakumar\\java-chat-repo\\websocket-springboot-01\\Java-chatapp\\chatclient\\node_modules\\@azure\\msal-browser\\src\\crypto\\SignedHttpRequest.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { CryptoOps } from \"./CryptoOps\";\r\nimport {\r\n    Logger,\r\n    LoggerOptions,\r\n    PopTokenGenerator,\r\n    SignedHttpRequestParameters,\r\n} from \"@azure/msal-common\";\r\nimport { version, name } from \"../packageMetadata\";\r\n\r\nexport type SignedHttpRequestOptions = {\r\n    loggerOptions: LoggerOptions;\r\n};\r\n\r\nexport class SignedHttpRequest {\r\n    private popTokenGenerator: PopTokenGenerator;\r\n    private cryptoOps: CryptoOps;\r\n    private shrParameters: SignedHttpRequestParameters;\r\n    private logger: Logger;\r\n\r\n    constructor(\r\n        shrParameters: SignedHttpRequestParameters,\r\n        shrOptions?: SignedHttpRequestOptions\r\n    ) {\r\n        const loggerOptions = (shrOptions && shrOptions.loggerOptions) || {};\r\n        this.logger = new Logger(loggerOptions, name, version);\r\n        this.cryptoOps = new CryptoOps(this.logger);\r\n        this.popTokenGenerator = new PopTokenGenerator(this.cryptoOps);\r\n        this.shrParameters = shrParameters;\r\n    }\r\n\r\n    /**\r\n     * Generates and caches a keypair for the given request options.\r\n     * @returns Public key digest, which should be sent to the token issuer.\r\n     */\r\n    async generatePublicKeyThumbprint(): Promise<string> {\r\n        const { kid } = await this.popTokenGenerator.generateKid(\r\n            this.shrParameters\r\n        );\r\n\r\n        return kid;\r\n    }\r\n\r\n    /**\r\n     * Generates a signed http request for the given payload with the given key.\r\n     * @param payload Payload to sign (e.g. access token)\r\n     * @param publicKeyThumbprint Public key digest (from generatePublicKeyThumbprint API)\r\n     * @param claims Additional claims to include/override in the signed JWT\r\n     * @returns Pop token signed with the corresponding private key\r\n     */\r\n    async signRequest(\r\n        payload: string,\r\n        publicKeyThumbprint: string,\r\n        claims?: object\r\n    ): Promise<string> {\r\n        return this.popTokenGenerator.signPayload(\r\n            payload,\r\n            publicKeyThumbprint,\r\n            this.shrParameters,\r\n            claims\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Removes cached keys from browser for given public key thumbprint\r\n     * @param publicKeyThumbprint Public key digest (from generatePublicKeyThumbprint API)\r\n     * @returns If keys are properly deleted\r\n     */\r\n    async removeKeys(publicKeyThumbprint: string): Promise<boolean> {\r\n        return this.cryptoOps.removeTokenBindingKey(publicKeyThumbprint);\r\n    }\r\n}\r\n"],"mappings":";;;;;;;AAAA;;;AAGG;MAeUA,iBAAiB;EAM1BC,WACIA,CAAAC,aAA0C,EAC1CC,UAAqC;IAErC,MAAMC,aAAa,GAAID,UAAU,IAAIA,UAAU,CAACC,aAAa,IAAK,EAAE;IACpE,IAAI,CAACC,MAAM,GAAG,IAAIC,MAAM,CAACF,aAAa,EAAEG,IAAI,EAAEC,OAAO,CAAC;IACtD,IAAI,CAACC,SAAS,GAAG,IAAIC,SAAS,CAAC,IAAI,CAACL,MAAM,CAAC;IAC3C,IAAI,CAACM,iBAAiB,GAAG,IAAIC,iBAAiB,CAAC,IAAI,CAACH,SAAS,CAAC;IAC9D,IAAI,CAACP,aAAa,GAAGA,aAAa;;EAGtC;;;AAGG;EACH,MAAMW,2BAA2BA,CAAA;IAC7B,MAAM;MAAEC;IAAG,CAAE,GAAG,MAAM,IAAI,CAACH,iBAAiB,CAACI,WAAW,CACpD,IAAI,CAACb,aAAa,CACrB;IAED,OAAOY,GAAG;;EAGd;;;;;;AAMG;EACH,MAAME,WAAWA,CACbC,OAAe,EACfC,mBAA2B,EAC3BC,MAAe;IAEf,OAAO,IAAI,CAACR,iBAAiB,CAACS,WAAW,CACrCH,OAAO,EACPC,mBAAmB,EACnB,IAAI,CAAChB,aAAa,EAClBiB,MAAM,CACT;;EAGL;;;;AAIG;EACH,MAAME,UAAUA,CAACH,mBAA2B;IACxC,OAAO,IAAI,CAACT,SAAS,CAACa,qBAAqB,CAACJ,mBAAmB,CAAC;;AAEvE"},"metadata":{},"sourceType":"module","externalDependencies":[]}