{"ast":null,"code":"/*! @azure/msal-common v14.6.0 2024-01-09 */\n'use strict';\n\nimport { Constants, ResponseMode, OIDC_DEFAULT_SCOPES, HeaderNames, CLIENT_INFO, ClaimsRequestKeys, PasswordGrantConstants, AuthenticationScheme, ThrottlingConstants } from '../utils/Constants.mjs';\nimport { RESPONSE_TYPE, RESPONSE_MODE, NATIVE_BROKER, SCOPE, CLIENT_ID, REDIRECT_URI, POST_LOGOUT_URI, ID_TOKEN_HINT, DOMAIN_HINT, LOGIN_HINT, SID, CLAIMS, CLIENT_REQUEST_ID, X_CLIENT_SKU, X_CLIENT_VER, X_CLIENT_OS, X_CLIENT_CPU, X_APP_NAME, X_APP_VER, PROMPT, STATE, NONCE, CODE_CHALLENGE, CODE_CHALLENGE_METHOD, CODE, DEVICE_CODE, REFRESH_TOKEN, CODE_VERIFIER, CLIENT_SECRET, CLIENT_ASSERTION, CLIENT_ASSERTION_TYPE, OBO_ASSERTION, REQUESTED_TOKEN_USE, GRANT_TYPE, TOKEN_TYPE, REQ_CNF, X_CLIENT_CURR_TELEM, X_CLIENT_LAST_TELEM, X_MS_LIB_CAPABILITY, LOGOUT_HINT } from '../constants/AADServerParamKeys.mjs';\nimport { ScopeSet } from './ScopeSet.mjs';\nimport { createClientConfigurationError } from '../error/ClientConfigurationError.mjs';\nimport { RequestValidator } from './RequestValidator.mjs';\nimport { pkceParamsMissing, invalidClaims } from '../error/ClientConfigurationErrorCodes.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/** @internal */\nclass RequestParameterBuilder {\n  constructor() {\n    this.parameters = new Map();\n  }\n  /**\r\n   * add response_type = code\r\n   */\n  addResponseTypeCode() {\n    this.parameters.set(RESPONSE_TYPE, encodeURIComponent(Constants.CODE_RESPONSE_TYPE));\n  }\n  /**\r\n   * add response_type = token id_token\r\n   */\n  addResponseTypeForTokenAndIdToken() {\n    this.parameters.set(RESPONSE_TYPE, encodeURIComponent(`${Constants.TOKEN_RESPONSE_TYPE} ${Constants.ID_TOKEN_RESPONSE_TYPE}`));\n  }\n  /**\r\n   * add response_mode. defaults to query.\r\n   * @param responseMode\r\n   */\n  addResponseMode(responseMode) {\n    this.parameters.set(RESPONSE_MODE, encodeURIComponent(responseMode ? responseMode : ResponseMode.QUERY));\n  }\n  /**\r\n   * Add flag to indicate STS should attempt to use WAM if available\r\n   */\n  addNativeBroker() {\n    this.parameters.set(NATIVE_BROKER, encodeURIComponent(\"1\"));\n  }\n  /**\r\n   * add scopes. set addOidcScopes to false to prevent default scopes in non-user scenarios\r\n   * @param scopeSet\r\n   * @param addOidcScopes\r\n   */\n  addScopes(scopes, addOidcScopes = true, defaultScopes = OIDC_DEFAULT_SCOPES) {\n    // Always add openid to the scopes when adding OIDC scopes\n    if (addOidcScopes && !defaultScopes.includes(\"openid\") && !scopes.includes(\"openid\")) {\n      defaultScopes.push(\"openid\");\n    }\n    const requestScopes = addOidcScopes ? [...(scopes || []), ...defaultScopes] : scopes || [];\n    const scopeSet = new ScopeSet(requestScopes);\n    this.parameters.set(SCOPE, encodeURIComponent(scopeSet.printScopes()));\n  }\n  /**\r\n   * add clientId\r\n   * @param clientId\r\n   */\n  addClientId(clientId) {\n    this.parameters.set(CLIENT_ID, encodeURIComponent(clientId));\n  }\n  /**\r\n   * add redirect_uri\r\n   * @param redirectUri\r\n   */\n  addRedirectUri(redirectUri) {\n    RequestValidator.validateRedirectUri(redirectUri);\n    this.parameters.set(REDIRECT_URI, encodeURIComponent(redirectUri));\n  }\n  /**\r\n   * add post logout redirectUri\r\n   * @param redirectUri\r\n   */\n  addPostLogoutRedirectUri(redirectUri) {\n    RequestValidator.validateRedirectUri(redirectUri);\n    this.parameters.set(POST_LOGOUT_URI, encodeURIComponent(redirectUri));\n  }\n  /**\r\n   * add id_token_hint to logout request\r\n   * @param idTokenHint\r\n   */\n  addIdTokenHint(idTokenHint) {\n    this.parameters.set(ID_TOKEN_HINT, encodeURIComponent(idTokenHint));\n  }\n  /**\r\n   * add domain_hint\r\n   * @param domainHint\r\n   */\n  addDomainHint(domainHint) {\n    this.parameters.set(DOMAIN_HINT, encodeURIComponent(domainHint));\n  }\n  /**\r\n   * add login_hint\r\n   * @param loginHint\r\n   */\n  addLoginHint(loginHint) {\n    this.parameters.set(LOGIN_HINT, encodeURIComponent(loginHint));\n  }\n  /**\r\n   * Adds the CCS (Cache Credential Service) query parameter for login_hint\r\n   * @param loginHint\r\n   */\n  addCcsUpn(loginHint) {\n    this.parameters.set(HeaderNames.CCS_HEADER, encodeURIComponent(`UPN:${loginHint}`));\n  }\n  /**\r\n   * Adds the CCS (Cache Credential Service) query parameter for account object\r\n   * @param loginHint\r\n   */\n  addCcsOid(clientInfo) {\n    this.parameters.set(HeaderNames.CCS_HEADER, encodeURIComponent(`Oid:${clientInfo.uid}@${clientInfo.utid}`));\n  }\n  /**\r\n   * add sid\r\n   * @param sid\r\n   */\n  addSid(sid) {\n    this.parameters.set(SID, encodeURIComponent(sid));\n  }\n  /**\r\n   * add claims\r\n   * @param claims\r\n   */\n  addClaims(claims, clientCapabilities) {\n    const mergedClaims = this.addClientCapabilitiesToClaims(claims, clientCapabilities);\n    RequestValidator.validateClaims(mergedClaims);\n    this.parameters.set(CLAIMS, encodeURIComponent(mergedClaims));\n  }\n  /**\r\n   * add correlationId\r\n   * @param correlationId\r\n   */\n  addCorrelationId(correlationId) {\n    this.parameters.set(CLIENT_REQUEST_ID, encodeURIComponent(correlationId));\n  }\n  /**\r\n   * add library info query params\r\n   * @param libraryInfo\r\n   */\n  addLibraryInfo(libraryInfo) {\n    // Telemetry Info\n    this.parameters.set(X_CLIENT_SKU, libraryInfo.sku);\n    this.parameters.set(X_CLIENT_VER, libraryInfo.version);\n    if (libraryInfo.os) {\n      this.parameters.set(X_CLIENT_OS, libraryInfo.os);\n    }\n    if (libraryInfo.cpu) {\n      this.parameters.set(X_CLIENT_CPU, libraryInfo.cpu);\n    }\n  }\n  /**\r\n   * Add client telemetry parameters\r\n   * @param appTelemetry\r\n   */\n  addApplicationTelemetry(appTelemetry) {\n    if (appTelemetry?.appName) {\n      this.parameters.set(X_APP_NAME, appTelemetry.appName);\n    }\n    if (appTelemetry?.appVersion) {\n      this.parameters.set(X_APP_VER, appTelemetry.appVersion);\n    }\n  }\n  /**\r\n   * add prompt\r\n   * @param prompt\r\n   */\n  addPrompt(prompt) {\n    RequestValidator.validatePrompt(prompt);\n    this.parameters.set(`${PROMPT}`, encodeURIComponent(prompt));\n  }\n  /**\r\n   * add state\r\n   * @param state\r\n   */\n  addState(state) {\n    if (state) {\n      this.parameters.set(STATE, encodeURIComponent(state));\n    }\n  }\n  /**\r\n   * add nonce\r\n   * @param nonce\r\n   */\n  addNonce(nonce) {\n    this.parameters.set(NONCE, encodeURIComponent(nonce));\n  }\n  /**\r\n   * add code_challenge and code_challenge_method\r\n   * - throw if either of them are not passed\r\n   * @param codeChallenge\r\n   * @param codeChallengeMethod\r\n   */\n  addCodeChallengeParams(codeChallenge, codeChallengeMethod) {\n    RequestValidator.validateCodeChallengeParams(codeChallenge, codeChallengeMethod);\n    if (codeChallenge && codeChallengeMethod) {\n      this.parameters.set(CODE_CHALLENGE, encodeURIComponent(codeChallenge));\n      this.parameters.set(CODE_CHALLENGE_METHOD, encodeURIComponent(codeChallengeMethod));\n    } else {\n      throw createClientConfigurationError(pkceParamsMissing);\n    }\n  }\n  /**\r\n   * add the `authorization_code` passed by the user to exchange for a token\r\n   * @param code\r\n   */\n  addAuthorizationCode(code) {\n    this.parameters.set(CODE, encodeURIComponent(code));\n  }\n  /**\r\n   * add the `authorization_code` passed by the user to exchange for a token\r\n   * @param code\r\n   */\n  addDeviceCode(code) {\n    this.parameters.set(DEVICE_CODE, encodeURIComponent(code));\n  }\n  /**\r\n   * add the `refreshToken` passed by the user\r\n   * @param refreshToken\r\n   */\n  addRefreshToken(refreshToken) {\n    this.parameters.set(REFRESH_TOKEN, encodeURIComponent(refreshToken));\n  }\n  /**\r\n   * add the `code_verifier` passed by the user to exchange for a token\r\n   * @param codeVerifier\r\n   */\n  addCodeVerifier(codeVerifier) {\n    this.parameters.set(CODE_VERIFIER, encodeURIComponent(codeVerifier));\n  }\n  /**\r\n   * add client_secret\r\n   * @param clientSecret\r\n   */\n  addClientSecret(clientSecret) {\n    this.parameters.set(CLIENT_SECRET, encodeURIComponent(clientSecret));\n  }\n  /**\r\n   * add clientAssertion for confidential client flows\r\n   * @param clientAssertion\r\n   */\n  addClientAssertion(clientAssertion) {\n    if (clientAssertion) {\n      this.parameters.set(CLIENT_ASSERTION, encodeURIComponent(clientAssertion));\n    }\n  }\n  /**\r\n   * add clientAssertionType for confidential client flows\r\n   * @param clientAssertionType\r\n   */\n  addClientAssertionType(clientAssertionType) {\n    if (clientAssertionType) {\n      this.parameters.set(CLIENT_ASSERTION_TYPE, encodeURIComponent(clientAssertionType));\n    }\n  }\n  /**\r\n   * add OBO assertion for confidential client flows\r\n   * @param clientAssertion\r\n   */\n  addOboAssertion(oboAssertion) {\n    this.parameters.set(OBO_ASSERTION, encodeURIComponent(oboAssertion));\n  }\n  /**\r\n   * add grant type\r\n   * @param grantType\r\n   */\n  addRequestTokenUse(tokenUse) {\n    this.parameters.set(REQUESTED_TOKEN_USE, encodeURIComponent(tokenUse));\n  }\n  /**\r\n   * add grant type\r\n   * @param grantType\r\n   */\n  addGrantType(grantType) {\n    this.parameters.set(GRANT_TYPE, encodeURIComponent(grantType));\n  }\n  /**\r\n   * add client info\r\n   *\r\n   */\n  addClientInfo() {\n    this.parameters.set(CLIENT_INFO, \"1\");\n  }\n  /**\r\n   * add extraQueryParams\r\n   * @param eQParams\r\n   */\n  addExtraQueryParameters(eQParams) {\n    const sanitizedEQParams = RequestValidator.sanitizeEQParams(eQParams, this.parameters);\n    Object.keys(sanitizedEQParams).forEach(key => {\n      this.parameters.set(key, eQParams[key]);\n    });\n  }\n  addClientCapabilitiesToClaims(claims, clientCapabilities) {\n    let mergedClaims;\n    // Parse provided claims into JSON object or initialize empty object\n    if (!claims) {\n      mergedClaims = {};\n    } else {\n      try {\n        mergedClaims = JSON.parse(claims);\n      } catch (e) {\n        throw createClientConfigurationError(invalidClaims);\n      }\n    }\n    if (clientCapabilities && clientCapabilities.length > 0) {\n      if (!mergedClaims.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)) {\n        // Add access_token key to claims object\n        mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN] = {};\n      }\n      // Add xms_cc claim with provided clientCapabilities to access_token key\n      mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC] = {\n        values: clientCapabilities\n      };\n    }\n    return JSON.stringify(mergedClaims);\n  }\n  /**\r\n   * adds `username` for Password Grant flow\r\n   * @param username\r\n   */\n  addUsername(username) {\n    this.parameters.set(PasswordGrantConstants.username, encodeURIComponent(username));\n  }\n  /**\r\n   * adds `password` for Password Grant flow\r\n   * @param password\r\n   */\n  addPassword(password) {\n    this.parameters.set(PasswordGrantConstants.password, encodeURIComponent(password));\n  }\n  /**\r\n   * add pop_jwk to query params\r\n   * @param cnfString\r\n   */\n  addPopToken(cnfString) {\n    if (cnfString) {\n      this.parameters.set(TOKEN_TYPE, AuthenticationScheme.POP);\n      this.parameters.set(REQ_CNF, encodeURIComponent(cnfString));\n    }\n  }\n  /**\r\n   * add SSH JWK and key ID to query params\r\n   */\n  addSshJwk(sshJwkString) {\n    if (sshJwkString) {\n      this.parameters.set(TOKEN_TYPE, AuthenticationScheme.SSH);\n      this.parameters.set(REQ_CNF, encodeURIComponent(sshJwkString));\n    }\n  }\n  /**\r\n   * add server telemetry fields\r\n   * @param serverTelemetryManager\r\n   */\n  addServerTelemetry(serverTelemetryManager) {\n    this.parameters.set(X_CLIENT_CURR_TELEM, serverTelemetryManager.generateCurrentRequestHeaderValue());\n    this.parameters.set(X_CLIENT_LAST_TELEM, serverTelemetryManager.generateLastRequestHeaderValue());\n  }\n  /**\r\n   * Adds parameter that indicates to the server that throttling is supported\r\n   */\n  addThrottling() {\n    this.parameters.set(X_MS_LIB_CAPABILITY, ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE);\n  }\n  /**\r\n   * Adds logout_hint parameter for \"silent\" logout which prevent server account picker\r\n   */\n  addLogoutHint(logoutHint) {\n    this.parameters.set(LOGOUT_HINT, encodeURIComponent(logoutHint));\n  }\n  /**\r\n   * Utility to create a URL from the params map\r\n   */\n  createQueryString() {\n    const queryParameterArray = new Array();\n    this.parameters.forEach((value, key) => {\n      queryParameterArray.push(`${key}=${value}`);\n    });\n    return queryParameterArray.join(\"&\");\n  }\n}\nexport { RequestParameterBuilder };","map":{"version":3,"names":["RequestParameterBuilder","constructor","parameters","Map","addResponseTypeCode","set","RESPONSE_TYPE","encodeURIComponent","Constants","CODE_RESPONSE_TYPE","addResponseTypeForTokenAndIdToken","TOKEN_RESPONSE_TYPE","ID_TOKEN_RESPONSE_TYPE","addResponseMode","responseMode","RESPONSE_MODE","ResponseMode","QUERY","addNativeBroker","NATIVE_BROKER","addScopes","scopes","addOidcScopes","defaultScopes","OIDC_DEFAULT_SCOPES","includes","push","requestScopes","scopeSet","ScopeSet","SCOPE","printScopes","addClientId","clientId","CLIENT_ID","addRedirectUri","redirectUri","RequestValidator","validateRedirectUri","REDIRECT_URI","addPostLogoutRedirectUri","POST_LOGOUT_URI","addIdTokenHint","idTokenHint","ID_TOKEN_HINT","addDomainHint","domainHint","DOMAIN_HINT","addLoginHint","loginHint","LOGIN_HINT","addCcsUpn","HeaderNames","CCS_HEADER","addCcsOid","clientInfo","uid","utid","addSid","sid","SID","addClaims","claims","clientCapabilities","mergedClaims","addClientCapabilitiesToClaims","validateClaims","CLAIMS","addCorrelationId","correlationId","CLIENT_REQUEST_ID","addLibraryInfo","libraryInfo","X_CLIENT_SKU","sku","X_CLIENT_VER","version","os","X_CLIENT_OS","cpu","X_CLIENT_CPU","addApplicationTelemetry","appTelemetry","appName","X_APP_NAME","appVersion","X_APP_VER","addPrompt","prompt","validatePrompt","PROMPT","addState","state","STATE","addNonce","nonce","NONCE","addCodeChallengeParams","codeChallenge","codeChallengeMethod","validateCodeChallengeParams","CODE_CHALLENGE","CODE_CHALLENGE_METHOD","createClientConfigurationError","pkceParamsMissing","addAuthorizationCode","code","CODE","addDeviceCode","DEVICE_CODE","addRefreshToken","refreshToken","REFRESH_TOKEN","addCodeVerifier","codeVerifier","CODE_VERIFIER","addClientSecret","clientSecret","CLIENT_SECRET","addClientAssertion","clientAssertion","CLIENT_ASSERTION","addClientAssertionType","clientAssertionType","CLIENT_ASSERTION_TYPE","addOboAssertion","oboAssertion","OBO_ASSERTION","addRequestTokenUse","tokenUse","REQUESTED_TOKEN_USE","addGrantType","grantType","GRANT_TYPE","addClientInfo","CLIENT_INFO","addExtraQueryParameters","eQParams","sanitizedEQParams","sanitizeEQParams","Object","keys","forEach","key","JSON","parse","e","invalidClaims","length","hasOwnProperty","ClaimsRequestKeys","ACCESS_TOKEN","XMS_CC","values","stringify","addUsername","username","PasswordGrantConstants","addPassword","password","addPopToken","cnfString","TOKEN_TYPE","AuthenticationScheme","POP","REQ_CNF","addSshJwk","sshJwkString","SSH","addServerTelemetry","serverTelemetryManager","X_CLIENT_CURR_TELEM","generateCurrentRequestHeaderValue","X_CLIENT_LAST_TELEM","generateLastRequestHeaderValue","addThrottling","X_MS_LIB_CAPABILITY","ThrottlingConstants","X_MS_LIB_CAPABILITY_VALUE","addLogoutHint","logoutHint","LOGOUT_HINT","createQueryString","queryParameterArray","Array","value","join"],"sources":["D:\\selvakumar\\java-chat-repo\\websocket-springboot-01\\Java-chatapp\\chatclient\\node_modules\\@azure\\msal-common\\src\\request\\RequestParameterBuilder.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport {\r\n    Constants,\r\n    ResponseMode,\r\n    CLIENT_INFO,\r\n    AuthenticationScheme,\r\n    ClaimsRequestKeys,\r\n    PasswordGrantConstants,\r\n    OIDC_DEFAULT_SCOPES,\r\n    ThrottlingConstants,\r\n    HeaderNames,\r\n} from \"../utils/Constants\";\r\nimport * as AADServerParamKeys from \"../constants/AADServerParamKeys\";\r\nimport { ScopeSet } from \"./ScopeSet\";\r\nimport {\r\n    createClientConfigurationError,\r\n    ClientConfigurationErrorCodes,\r\n} from \"../error/ClientConfigurationError\";\r\nimport { StringDict } from \"../utils/MsalTypes\";\r\nimport { RequestValidator } from \"./RequestValidator\";\r\nimport {\r\n    ApplicationTelemetry,\r\n    LibraryInfo,\r\n} from \"../config/ClientConfiguration\";\r\nimport { ServerTelemetryManager } from \"../telemetry/server/ServerTelemetryManager\";\r\nimport { ClientInfo } from \"../account/ClientInfo\";\r\n\r\n/** @internal */\r\nexport class RequestParameterBuilder {\r\n    private parameters: Map<string, string>;\r\n\r\n    constructor() {\r\n        this.parameters = new Map<string, string>();\r\n    }\r\n\r\n    /**\r\n     * add response_type = code\r\n     */\r\n    addResponseTypeCode(): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.RESPONSE_TYPE,\r\n            encodeURIComponent(Constants.CODE_RESPONSE_TYPE)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add response_type = token id_token\r\n     */\r\n    addResponseTypeForTokenAndIdToken(): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.RESPONSE_TYPE,\r\n            encodeURIComponent(\r\n                `${Constants.TOKEN_RESPONSE_TYPE} ${Constants.ID_TOKEN_RESPONSE_TYPE}`\r\n            )\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add response_mode. defaults to query.\r\n     * @param responseMode\r\n     */\r\n    addResponseMode(responseMode?: ResponseMode): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.RESPONSE_MODE,\r\n            encodeURIComponent(responseMode ? responseMode : ResponseMode.QUERY)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Add flag to indicate STS should attempt to use WAM if available\r\n     */\r\n    addNativeBroker(): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.NATIVE_BROKER,\r\n            encodeURIComponent(\"1\")\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add scopes. set addOidcScopes to false to prevent default scopes in non-user scenarios\r\n     * @param scopeSet\r\n     * @param addOidcScopes\r\n     */\r\n    addScopes(\r\n        scopes: string[],\r\n        addOidcScopes: boolean = true,\r\n        defaultScopes: Array<string> = OIDC_DEFAULT_SCOPES\r\n    ): void {\r\n        // Always add openid to the scopes when adding OIDC scopes\r\n        if (\r\n            addOidcScopes &&\r\n            !defaultScopes.includes(\"openid\") &&\r\n            !scopes.includes(\"openid\")\r\n        ) {\r\n            defaultScopes.push(\"openid\");\r\n        }\r\n        const requestScopes = addOidcScopes\r\n            ? [...(scopes || []), ...defaultScopes]\r\n            : scopes || [];\r\n        const scopeSet = new ScopeSet(requestScopes);\r\n        this.parameters.set(\r\n            AADServerParamKeys.SCOPE,\r\n            encodeURIComponent(scopeSet.printScopes())\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add clientId\r\n     * @param clientId\r\n     */\r\n    addClientId(clientId: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.CLIENT_ID,\r\n            encodeURIComponent(clientId)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add redirect_uri\r\n     * @param redirectUri\r\n     */\r\n    addRedirectUri(redirectUri: string): void {\r\n        RequestValidator.validateRedirectUri(redirectUri);\r\n        this.parameters.set(\r\n            AADServerParamKeys.REDIRECT_URI,\r\n            encodeURIComponent(redirectUri)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add post logout redirectUri\r\n     * @param redirectUri\r\n     */\r\n    addPostLogoutRedirectUri(redirectUri: string): void {\r\n        RequestValidator.validateRedirectUri(redirectUri);\r\n        this.parameters.set(\r\n            AADServerParamKeys.POST_LOGOUT_URI,\r\n            encodeURIComponent(redirectUri)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add id_token_hint to logout request\r\n     * @param idTokenHint\r\n     */\r\n    addIdTokenHint(idTokenHint: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.ID_TOKEN_HINT,\r\n            encodeURIComponent(idTokenHint)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add domain_hint\r\n     * @param domainHint\r\n     */\r\n    addDomainHint(domainHint: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.DOMAIN_HINT,\r\n            encodeURIComponent(domainHint)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add login_hint\r\n     * @param loginHint\r\n     */\r\n    addLoginHint(loginHint: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.LOGIN_HINT,\r\n            encodeURIComponent(loginHint)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Adds the CCS (Cache Credential Service) query parameter for login_hint\r\n     * @param loginHint\r\n     */\r\n    addCcsUpn(loginHint: string): void {\r\n        this.parameters.set(\r\n            HeaderNames.CCS_HEADER,\r\n            encodeURIComponent(`UPN:${loginHint}`)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Adds the CCS (Cache Credential Service) query parameter for account object\r\n     * @param loginHint\r\n     */\r\n    addCcsOid(clientInfo: ClientInfo): void {\r\n        this.parameters.set(\r\n            HeaderNames.CCS_HEADER,\r\n            encodeURIComponent(`Oid:${clientInfo.uid}@${clientInfo.utid}`)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add sid\r\n     * @param sid\r\n     */\r\n    addSid(sid: string): void {\r\n        this.parameters.set(AADServerParamKeys.SID, encodeURIComponent(sid));\r\n    }\r\n\r\n    /**\r\n     * add claims\r\n     * @param claims\r\n     */\r\n    addClaims(claims?: string, clientCapabilities?: Array<string>): void {\r\n        const mergedClaims = this.addClientCapabilitiesToClaims(\r\n            claims,\r\n            clientCapabilities\r\n        );\r\n        RequestValidator.validateClaims(mergedClaims);\r\n        this.parameters.set(\r\n            AADServerParamKeys.CLAIMS,\r\n            encodeURIComponent(mergedClaims)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add correlationId\r\n     * @param correlationId\r\n     */\r\n    addCorrelationId(correlationId: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.CLIENT_REQUEST_ID,\r\n            encodeURIComponent(correlationId)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add library info query params\r\n     * @param libraryInfo\r\n     */\r\n    addLibraryInfo(libraryInfo: LibraryInfo): void {\r\n        // Telemetry Info\r\n        this.parameters.set(AADServerParamKeys.X_CLIENT_SKU, libraryInfo.sku);\r\n        this.parameters.set(\r\n            AADServerParamKeys.X_CLIENT_VER,\r\n            libraryInfo.version\r\n        );\r\n        if (libraryInfo.os) {\r\n            this.parameters.set(AADServerParamKeys.X_CLIENT_OS, libraryInfo.os);\r\n        }\r\n        if (libraryInfo.cpu) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.X_CLIENT_CPU,\r\n                libraryInfo.cpu\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add client telemetry parameters\r\n     * @param appTelemetry\r\n     */\r\n    addApplicationTelemetry(appTelemetry: ApplicationTelemetry): void {\r\n        if (appTelemetry?.appName) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.X_APP_NAME,\r\n                appTelemetry.appName\r\n            );\r\n        }\r\n\r\n        if (appTelemetry?.appVersion) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.X_APP_VER,\r\n                appTelemetry.appVersion\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add prompt\r\n     * @param prompt\r\n     */\r\n    addPrompt(prompt: string): void {\r\n        RequestValidator.validatePrompt(prompt);\r\n        this.parameters.set(\r\n            `${AADServerParamKeys.PROMPT}`,\r\n            encodeURIComponent(prompt)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add state\r\n     * @param state\r\n     */\r\n    addState(state: string): void {\r\n        if (state) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.STATE,\r\n                encodeURIComponent(state)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add nonce\r\n     * @param nonce\r\n     */\r\n    addNonce(nonce: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.NONCE,\r\n            encodeURIComponent(nonce)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add code_challenge and code_challenge_method\r\n     * - throw if either of them are not passed\r\n     * @param codeChallenge\r\n     * @param codeChallengeMethod\r\n     */\r\n    addCodeChallengeParams(\r\n        codeChallenge: string,\r\n        codeChallengeMethod: string\r\n    ): void {\r\n        RequestValidator.validateCodeChallengeParams(\r\n            codeChallenge,\r\n            codeChallengeMethod\r\n        );\r\n        if (codeChallenge && codeChallengeMethod) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.CODE_CHALLENGE,\r\n                encodeURIComponent(codeChallenge)\r\n            );\r\n            this.parameters.set(\r\n                AADServerParamKeys.CODE_CHALLENGE_METHOD,\r\n                encodeURIComponent(codeChallengeMethod)\r\n            );\r\n        } else {\r\n            throw createClientConfigurationError(\r\n                ClientConfigurationErrorCodes.pkceParamsMissing\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add the `authorization_code` passed by the user to exchange for a token\r\n     * @param code\r\n     */\r\n    addAuthorizationCode(code: string): void {\r\n        this.parameters.set(AADServerParamKeys.CODE, encodeURIComponent(code));\r\n    }\r\n\r\n    /**\r\n     * add the `authorization_code` passed by the user to exchange for a token\r\n     * @param code\r\n     */\r\n    addDeviceCode(code: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.DEVICE_CODE,\r\n            encodeURIComponent(code)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add the `refreshToken` passed by the user\r\n     * @param refreshToken\r\n     */\r\n    addRefreshToken(refreshToken: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.REFRESH_TOKEN,\r\n            encodeURIComponent(refreshToken)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add the `code_verifier` passed by the user to exchange for a token\r\n     * @param codeVerifier\r\n     */\r\n    addCodeVerifier(codeVerifier: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.CODE_VERIFIER,\r\n            encodeURIComponent(codeVerifier)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add client_secret\r\n     * @param clientSecret\r\n     */\r\n    addClientSecret(clientSecret: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.CLIENT_SECRET,\r\n            encodeURIComponent(clientSecret)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add clientAssertion for confidential client flows\r\n     * @param clientAssertion\r\n     */\r\n    addClientAssertion(clientAssertion: string): void {\r\n        if (clientAssertion) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.CLIENT_ASSERTION,\r\n                encodeURIComponent(clientAssertion)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add clientAssertionType for confidential client flows\r\n     * @param clientAssertionType\r\n     */\r\n    addClientAssertionType(clientAssertionType: string): void {\r\n        if (clientAssertionType) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.CLIENT_ASSERTION_TYPE,\r\n                encodeURIComponent(clientAssertionType)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add OBO assertion for confidential client flows\r\n     * @param clientAssertion\r\n     */\r\n    addOboAssertion(oboAssertion: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.OBO_ASSERTION,\r\n            encodeURIComponent(oboAssertion)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add grant type\r\n     * @param grantType\r\n     */\r\n    addRequestTokenUse(tokenUse: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.REQUESTED_TOKEN_USE,\r\n            encodeURIComponent(tokenUse)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add grant type\r\n     * @param grantType\r\n     */\r\n    addGrantType(grantType: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.GRANT_TYPE,\r\n            encodeURIComponent(grantType)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add client info\r\n     *\r\n     */\r\n    addClientInfo(): void {\r\n        this.parameters.set(CLIENT_INFO, \"1\");\r\n    }\r\n\r\n    /**\r\n     * add extraQueryParams\r\n     * @param eQParams\r\n     */\r\n    addExtraQueryParameters(eQParams: StringDict): void {\r\n        const sanitizedEQParams = RequestValidator.sanitizeEQParams(\r\n            eQParams,\r\n            this.parameters\r\n        );\r\n        Object.keys(sanitizedEQParams).forEach((key) => {\r\n            this.parameters.set(key, eQParams[key]);\r\n        });\r\n    }\r\n\r\n    addClientCapabilitiesToClaims(\r\n        claims?: string,\r\n        clientCapabilities?: Array<string>\r\n    ): string {\r\n        let mergedClaims: object;\r\n\r\n        // Parse provided claims into JSON object or initialize empty object\r\n        if (!claims) {\r\n            mergedClaims = {};\r\n        } else {\r\n            try {\r\n                mergedClaims = JSON.parse(claims);\r\n            } catch (e) {\r\n                throw createClientConfigurationError(\r\n                    ClientConfigurationErrorCodes.invalidClaims\r\n                );\r\n            }\r\n        }\r\n\r\n        if (clientCapabilities && clientCapabilities.length > 0) {\r\n            if (!mergedClaims.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)) {\r\n                // Add access_token key to claims object\r\n                mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN] = {};\r\n            }\r\n\r\n            // Add xms_cc claim with provided clientCapabilities to access_token key\r\n            mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN][\r\n                ClaimsRequestKeys.XMS_CC\r\n            ] = {\r\n                values: clientCapabilities,\r\n            };\r\n        }\r\n\r\n        return JSON.stringify(mergedClaims);\r\n    }\r\n\r\n    /**\r\n     * adds `username` for Password Grant flow\r\n     * @param username\r\n     */\r\n    addUsername(username: string): void {\r\n        this.parameters.set(\r\n            PasswordGrantConstants.username,\r\n            encodeURIComponent(username)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * adds `password` for Password Grant flow\r\n     * @param password\r\n     */\r\n    addPassword(password: string): void {\r\n        this.parameters.set(\r\n            PasswordGrantConstants.password,\r\n            encodeURIComponent(password)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * add pop_jwk to query params\r\n     * @param cnfString\r\n     */\r\n    addPopToken(cnfString: string): void {\r\n        if (cnfString) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.TOKEN_TYPE,\r\n                AuthenticationScheme.POP\r\n            );\r\n            this.parameters.set(\r\n                AADServerParamKeys.REQ_CNF,\r\n                encodeURIComponent(cnfString)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add SSH JWK and key ID to query params\r\n     */\r\n    addSshJwk(sshJwkString: string): void {\r\n        if (sshJwkString) {\r\n            this.parameters.set(\r\n                AADServerParamKeys.TOKEN_TYPE,\r\n                AuthenticationScheme.SSH\r\n            );\r\n            this.parameters.set(\r\n                AADServerParamKeys.REQ_CNF,\r\n                encodeURIComponent(sshJwkString)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add server telemetry fields\r\n     * @param serverTelemetryManager\r\n     */\r\n    addServerTelemetry(serverTelemetryManager: ServerTelemetryManager): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.X_CLIENT_CURR_TELEM,\r\n            serverTelemetryManager.generateCurrentRequestHeaderValue()\r\n        );\r\n        this.parameters.set(\r\n            AADServerParamKeys.X_CLIENT_LAST_TELEM,\r\n            serverTelemetryManager.generateLastRequestHeaderValue()\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Adds parameter that indicates to the server that throttling is supported\r\n     */\r\n    addThrottling(): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.X_MS_LIB_CAPABILITY,\r\n            ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Adds logout_hint parameter for \"silent\" logout which prevent server account picker\r\n     */\r\n    addLogoutHint(logoutHint: string): void {\r\n        this.parameters.set(\r\n            AADServerParamKeys.LOGOUT_HINT,\r\n            encodeURIComponent(logoutHint)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Utility to create a URL from the params map\r\n     */\r\n    createQueryString(): string {\r\n        const queryParameterArray: Array<string> = new Array<string>();\r\n\r\n        this.parameters.forEach((value, key) => {\r\n            queryParameterArray.push(`${key}=${value}`);\r\n        });\r\n\r\n        return queryParameterArray.join(\"&\");\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;;;AAAA;;;AAGG;AA4BH;MACaA,uBAAuB;EAGhCC,YAAA;IACI,IAAI,CAACC,UAAU,GAAG,IAAIC,GAAG,EAAkB;;EAG/C;;AAEG;EACHC,mBAAmBA,CAAA;IACf,IAAI,CAACF,UAAU,CAACG,GAAG,CACfC,aAAgC,EAChCC,kBAAkB,CAACC,SAAS,CAACC,kBAAkB,CAAC,CACnD;;EAGL;;AAEG;EACHC,iCAAiCA,CAAA;IAC7B,IAAI,CAACR,UAAU,CAACG,GAAG,CACfC,aAAgC,EAChCC,kBAAkB,CACd,GAAGC,SAAS,CAACG,mBAAuB,IAAAH,SAAS,CAACI,sBAAsB,EAAE,CACzE,CACJ;;EAGL;;;AAGG;EACHC,eAAeA,CAACC,YAA2B;IACvC,IAAI,CAACZ,UAAU,CAACG,GAAG,CACfU,aAAgC,EAChCR,kBAAkB,CAACO,YAAY,GAAGA,YAAY,GAAGE,YAAY,CAACC,KAAK,CAAC,CACvE;;EAGL;;AAEG;EACHC,eAAeA,CAAA;IACX,IAAI,CAAChB,UAAU,CAACG,GAAG,CACfc,aAAgC,EAChCZ,kBAAkB,CAAC,GAAG,CAAC,CAC1B;;EAGL;;;;AAIG;EACHa,SAASA,CACLC,MAAgB,EAChBC,aAAA,GAAyB,IAAI,EAC7BC,aAAA,GAA+BC,mBAAmB;;IAGlD,IACIF,aAAa,IACb,CAACC,aAAa,CAACE,QAAQ,CAAC,QAAQ,CAAC,IACjC,CAACJ,MAAM,CAACI,QAAQ,CAAC,QAAQ,CAAC,EAC5B;MACEF,aAAa,CAACG,IAAI,CAAC,QAAQ,CAAC;IAC/B;IACD,MAAMC,aAAa,GAAGL,aAAa,GAC7B,CAAC,IAAID,MAAM,IAAI,EAAE,CAAC,EAAE,GAAGE,aAAa,CAAC,GACrCF,MAAM,IAAI,EAAE;IAClB,MAAMO,QAAQ,GAAG,IAAIC,QAAQ,CAACF,aAAa,CAAC;IAC5C,IAAI,CAACzB,UAAU,CAACG,GAAG,CACfyB,KAAwB,EACxBvB,kBAAkB,CAACqB,QAAQ,CAACG,WAAW,EAAE,CAAC,CAC7C;;EAGL;;;AAGG;EACHC,WAAWA,CAACC,QAAgB;IACxB,IAAI,CAAC/B,UAAU,CAACG,GAAG,CACf6B,SAA4B,EAC5B3B,kBAAkB,CAAC0B,QAAQ,CAAC,CAC/B;;EAGL;;;AAGG;EACHE,cAAcA,CAACC,WAAmB;IAC9BC,gBAAgB,CAACC,mBAAmB,CAACF,WAAW,CAAC;IACjD,IAAI,CAAClC,UAAU,CAACG,GAAG,CACfkC,YAA+B,EAC/BhC,kBAAkB,CAAC6B,WAAW,CAAC,CAClC;;EAGL;;;AAGG;EACHI,wBAAwBA,CAACJ,WAAmB;IACxCC,gBAAgB,CAACC,mBAAmB,CAACF,WAAW,CAAC;IACjD,IAAI,CAAClC,UAAU,CAACG,GAAG,CACfoC,eAAkC,EAClClC,kBAAkB,CAAC6B,WAAW,CAAC,CAClC;;EAGL;;;AAGG;EACHM,cAAcA,CAACC,WAAmB;IAC9B,IAAI,CAACzC,UAAU,CAACG,GAAG,CACfuC,aAAgC,EAChCrC,kBAAkB,CAACoC,WAAW,CAAC,CAClC;;EAGL;;;AAGG;EACHE,aAAaA,CAACC,UAAkB;IAC5B,IAAI,CAAC5C,UAAU,CAACG,GAAG,CACf0C,WAA8B,EAC9BxC,kBAAkB,CAACuC,UAAU,CAAC,CACjC;;EAGL;;;AAGG;EACHE,YAAYA,CAACC,SAAiB;IAC1B,IAAI,CAAC/C,UAAU,CAACG,GAAG,CACf6C,UAA6B,EAC7B3C,kBAAkB,CAAC0C,SAAS,CAAC,CAChC;;EAGL;;;AAGG;EACHE,SAASA,CAACF,SAAiB;IACvB,IAAI,CAAC/C,UAAU,CAACG,GAAG,CACf+C,WAAW,CAACC,UAAU,EACtB9C,kBAAkB,CAAQ,OAAA0C,SAAW,GAAC,CACzC;;EAGL;;;AAGG;EACHK,SAASA,CAACC,UAAsB;IAC5B,IAAI,CAACrD,UAAU,CAACG,GAAG,CACf+C,WAAW,CAACC,UAAU,EACtB9C,kBAAkB,CAAC,OAAOgD,UAAU,CAACC,GAAO,IAAAD,UAAU,CAACE,IAAI,EAAE,CAAC,CACjE;;EAGL;;;AAGG;EACHC,MAAMA,CAACC,GAAW;IACd,IAAI,CAACzD,UAAU,CAACG,GAAG,CAACuD,GAAsB,EAAErD,kBAAkB,CAACoD,GAAG,CAAC,CAAC;;EAGxE;;;AAGG;EACHE,SAASA,CAACC,MAAe,EAAEC,kBAAkC;IACzD,MAAMC,YAAY,GAAG,IAAI,CAACC,6BAA6B,CACnDH,MAAM,EACNC,kBAAkB,CACrB;IACD1B,gBAAgB,CAAC6B,cAAc,CAACF,YAAY,CAAC;IAC7C,IAAI,CAAC9D,UAAU,CAACG,GAAG,CACf8D,MAAyB,EACzB5D,kBAAkB,CAACyD,YAAY,CAAC,CACnC;;EAGL;;;AAGG;EACHI,gBAAgBA,CAACC,aAAqB;IAClC,IAAI,CAACnE,UAAU,CAACG,GAAG,CACfiE,iBAAoC,EACpC/D,kBAAkB,CAAC8D,aAAa,CAAC,CACpC;;EAGL;;;AAGG;EACHE,cAAcA,CAACC,WAAwB;;IAEnC,IAAI,CAACtE,UAAU,CAACG,GAAG,CAACoE,YAA+B,EAAED,WAAW,CAACE,GAAG,CAAC;IACrE,IAAI,CAACxE,UAAU,CAACG,GAAG,CACfsE,YAA+B,EAC/BH,WAAW,CAACI,OAAO,CACtB;IACD,IAAIJ,WAAW,CAACK,EAAE,EAAE;MAChB,IAAI,CAAC3E,UAAU,CAACG,GAAG,CAACyE,WAA8B,EAAEN,WAAW,CAACK,EAAE,CAAC;IACtE;IACD,IAAIL,WAAW,CAACO,GAAG,EAAE;MACjB,IAAI,CAAC7E,UAAU,CAACG,GAAG,CACf2E,YAA+B,EAC/BR,WAAW,CAACO,GAAG,CAClB;IACJ;;EAGL;;;AAGG;EACHE,uBAAuBA,CAACC,YAAkC;IACtD,IAAIA,YAAY,EAAEC,OAAO,EAAE;MACvB,IAAI,CAACjF,UAAU,CAACG,GAAG,CACf+E,UAA6B,EAC7BF,YAAY,CAACC,OAAO,CACvB;IACJ;IAED,IAAID,YAAY,EAAEG,UAAU,EAAE;MAC1B,IAAI,CAACnF,UAAU,CAACG,GAAG,CACfiF,SAA4B,EAC5BJ,YAAY,CAACG,UAAU,CAC1B;IACJ;;EAGL;;;AAGG;EACHE,SAASA,CAACC,MAAc;IACpBnD,gBAAgB,CAACoD,cAAc,CAACD,MAAM,CAAC;IACvC,IAAI,CAACtF,UAAU,CAACG,GAAG,CACf,GAAGqF,MAAyB,EAAE,EAC9BnF,kBAAkB,CAACiF,MAAM,CAAC,CAC7B;;EAGL;;;AAGG;EACHG,QAAQA,CAACC,KAAa;IAClB,IAAIA,KAAK,EAAE;MACP,IAAI,CAAC1F,UAAU,CAACG,GAAG,CACfwF,KAAwB,EACxBtF,kBAAkB,CAACqF,KAAK,CAAC,CAC5B;IACJ;;EAGL;;;AAGG;EACHE,QAAQA,CAACC,KAAa;IAClB,IAAI,CAAC7F,UAAU,CAACG,GAAG,CACf2F,KAAwB,EACxBzF,kBAAkB,CAACwF,KAAK,CAAC,CAC5B;;EAGL;;;;;AAKG;EACHE,sBAAsBA,CAClBC,aAAqB,EACrBC,mBAA2B;IAE3B9D,gBAAgB,CAAC+D,2BAA2B,CACxCF,aAAa,EACbC,mBAAmB,CACtB;IACD,IAAID,aAAa,IAAIC,mBAAmB,EAAE;MACtC,IAAI,CAACjG,UAAU,CAACG,GAAG,CACfgG,cAAiC,EACjC9F,kBAAkB,CAAC2F,aAAa,CAAC,CACpC;MACD,IAAI,CAAChG,UAAU,CAACG,GAAG,CACfiG,qBAAwC,EACxC/F,kBAAkB,CAAC4F,mBAAmB,CAAC,CAC1C;IACJ,OAAM;MACH,MAAMI,8BAA8B,CAChCC,iBAA+C,CAClD;IACJ;;EAGL;;;AAGG;EACHC,oBAAoBA,CAACC,IAAY;IAC7B,IAAI,CAACxG,UAAU,CAACG,GAAG,CAACsG,IAAuB,EAAEpG,kBAAkB,CAACmG,IAAI,CAAC,CAAC;;EAG1E;;;AAGG;EACHE,aAAaA,CAACF,IAAY;IACtB,IAAI,CAACxG,UAAU,CAACG,GAAG,CACfwG,WAA8B,EAC9BtG,kBAAkB,CAACmG,IAAI,CAAC,CAC3B;;EAGL;;;AAGG;EACHI,eAAeA,CAACC,YAAoB;IAChC,IAAI,CAAC7G,UAAU,CAACG,GAAG,CACf2G,aAAgC,EAChCzG,kBAAkB,CAACwG,YAAY,CAAC,CACnC;;EAGL;;;AAGG;EACHE,eAAeA,CAACC,YAAoB;IAChC,IAAI,CAAChH,UAAU,CAACG,GAAG,CACf8G,aAAgC,EAChC5G,kBAAkB,CAAC2G,YAAY,CAAC,CACnC;;EAGL;;;AAGG;EACHE,eAAeA,CAACC,YAAoB;IAChC,IAAI,CAACnH,UAAU,CAACG,GAAG,CACfiH,aAAgC,EAChC/G,kBAAkB,CAAC8G,YAAY,CAAC,CACnC;;EAGL;;;AAGG;EACHE,kBAAkBA,CAACC,eAAuB;IACtC,IAAIA,eAAe,EAAE;MACjB,IAAI,CAACtH,UAAU,CAACG,GAAG,CACfoH,gBAAmC,EACnClH,kBAAkB,CAACiH,eAAe,CAAC,CACtC;IACJ;;EAGL;;;AAGG;EACHE,sBAAsBA,CAACC,mBAA2B;IAC9C,IAAIA,mBAAmB,EAAE;MACrB,IAAI,CAACzH,UAAU,CAACG,GAAG,CACfuH,qBAAwC,EACxCrH,kBAAkB,CAACoH,mBAAmB,CAAC,CAC1C;IACJ;;EAGL;;;AAGG;EACHE,eAAeA,CAACC,YAAoB;IAChC,IAAI,CAAC5H,UAAU,CAACG,GAAG,CACf0H,aAAgC,EAChCxH,kBAAkB,CAACuH,YAAY,CAAC,CACnC;;EAGL;;;AAGG;EACHE,kBAAkBA,CAACC,QAAgB;IAC/B,IAAI,CAAC/H,UAAU,CAACG,GAAG,CACf6H,mBAAsC,EACtC3H,kBAAkB,CAAC0H,QAAQ,CAAC,CAC/B;;EAGL;;;AAGG;EACHE,YAAYA,CAACC,SAAiB;IAC1B,IAAI,CAAClI,UAAU,CAACG,GAAG,CACfgI,UAA6B,EAC7B9H,kBAAkB,CAAC6H,SAAS,CAAC,CAChC;;EAGL;;;AAGG;EACHE,aAAaA,CAAA;IACT,IAAI,CAACpI,UAAU,CAACG,GAAG,CAACkI,WAAW,EAAE,GAAG,CAAC;;EAGzC;;;AAGG;EACHC,uBAAuBA,CAACC,QAAoB;IACxC,MAAMC,iBAAiB,GAAGrG,gBAAgB,CAACsG,gBAAgB,CACvDF,QAAQ,EACR,IAAI,CAACvI,UAAU,CAClB;IACD0I,MAAM,CAACC,IAAI,CAACH,iBAAiB,CAAC,CAACI,OAAO,CAAEC,GAAG,IAAI;MAC3C,IAAI,CAAC7I,UAAU,CAACG,GAAG,CAAC0I,GAAG,EAAEN,QAAQ,CAACM,GAAG,CAAC,CAAC;IAC3C,CAAC,CAAC;;EAGN9E,6BAA6BA,CACzBH,MAAe,EACfC,kBAAkC;IAElC,IAAIC,YAAoB;;IAGxB,IAAI,CAACF,MAAM,EAAE;MACTE,YAAY,GAAG,EAAE;IACpB,OAAM;MACH,IAAI;QACAA,YAAY,GAAGgF,IAAI,CAACC,KAAK,CAACnF,MAAM,CAAC;MACpC,EAAC,OAAOoF,CAAC,EAAE;QACR,MAAM3C,8BAA8B,CAChC4C,aAA2C,CAC9C;MACJ;IACJ;IAED,IAAIpF,kBAAkB,IAAIA,kBAAkB,CAACqF,MAAM,GAAG,CAAC,EAAE;MACrD,IAAI,CAACpF,YAAY,CAACqF,cAAc,CAACC,iBAAiB,CAACC,YAAY,CAAC,EAAE;;QAE9DvF,YAAY,CAACsF,iBAAiB,CAACC,YAAY,CAAC,GAAG,EAAE;MACpD;;MAGDvF,YAAY,CAACsF,iBAAiB,CAACC,YAAY,CAAC,CACxCD,iBAAiB,CAACE,MAAM,CAC3B,GAAG;QACAC,MAAM,EAAE1F;OACX;IACJ;IAED,OAAOiF,IAAI,CAACU,SAAS,CAAC1F,YAAY,CAAC;;EAGvC;;;AAGG;EACH2F,WAAWA,CAACC,QAAgB;IACxB,IAAI,CAAC1J,UAAU,CAACG,GAAG,CACfwJ,sBAAsB,CAACD,QAAQ,EAC/BrJ,kBAAkB,CAACqJ,QAAQ,CAAC,CAC/B;;EAGL;;;AAGG;EACHE,WAAWA,CAACC,QAAgB;IACxB,IAAI,CAAC7J,UAAU,CAACG,GAAG,CACfwJ,sBAAsB,CAACE,QAAQ,EAC/BxJ,kBAAkB,CAACwJ,QAAQ,CAAC,CAC/B;;EAGL;;;AAGG;EACHC,WAAWA,CAACC,SAAiB;IACzB,IAAIA,SAAS,EAAE;MACX,IAAI,CAAC/J,UAAU,CAACG,GAAG,CACf6J,UAA6B,EAC7BC,oBAAoB,CAACC,GAAG,CAC3B;MACD,IAAI,CAAClK,UAAU,CAACG,GAAG,CACfgK,OAA0B,EAC1B9J,kBAAkB,CAAC0J,SAAS,CAAC,CAChC;IACJ;;EAGL;;AAEG;EACHK,SAASA,CAACC,YAAoB;IAC1B,IAAIA,YAAY,EAAE;MACd,IAAI,CAACrK,UAAU,CAACG,GAAG,CACf6J,UAA6B,EAC7BC,oBAAoB,CAACK,GAAG,CAC3B;MACD,IAAI,CAACtK,UAAU,CAACG,GAAG,CACfgK,OAA0B,EAC1B9J,kBAAkB,CAACgK,YAAY,CAAC,CACnC;IACJ;;EAGL;;;AAGG;EACHE,kBAAkBA,CAACC,sBAA8C;IAC7D,IAAI,CAACxK,UAAU,CAACG,GAAG,CACfsK,mBAAsC,EACtCD,sBAAsB,CAACE,iCAAiC,EAAE,CAC7D;IACD,IAAI,CAAC1K,UAAU,CAACG,GAAG,CACfwK,mBAAsC,EACtCH,sBAAsB,CAACI,8BAA8B,EAAE,CAC1D;;EAGL;;AAEG;EACHC,aAAaA,CAAA;IACT,IAAI,CAAC7K,UAAU,CAACG,GAAG,CACf2K,mBAAsC,EACtCC,mBAAmB,CAACC,yBAAyB,CAChD;;EAGL;;AAEG;EACHC,aAAaA,CAACC,UAAkB;IAC5B,IAAI,CAAClL,UAAU,CAACG,GAAG,CACfgL,WAA8B,EAC9B9K,kBAAkB,CAAC6K,UAAU,CAAC,CACjC;;EAGL;;AAEG;EACHE,iBAAiBA,CAAA;IACb,MAAMC,mBAAmB,GAAkB,IAAIC,KAAK,EAAU;IAE9D,IAAI,CAACtL,UAAU,CAAC4I,OAAO,CAAC,CAAC2C,KAAK,EAAE1C,GAAG,KAAI;MACnCwC,mBAAmB,CAAC7J,IAAI,CAAC,GAAGqH,GAAO,IAAA0C,KAAO,GAAC;IAC/C,CAAC,CAAC;IAEF,OAAOF,mBAAmB,CAACG,IAAI,CAAC,GAAG,CAAC;;AAE3C"},"metadata":{},"sourceType":"module","externalDependencies":[]}