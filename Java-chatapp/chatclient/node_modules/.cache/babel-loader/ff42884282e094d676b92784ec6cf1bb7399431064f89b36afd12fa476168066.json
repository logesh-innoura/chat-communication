{"ast":null,"code":"/*! @azure/msal-browser v3.7.0 2024-01-09 */\n'use strict';\n\nimport { AuthError, InteractionRequiredAuthError, createInteractionRequiredAuthError, InteractionRequiredAuthErrorCodes } from '@azure/msal-common';\nimport { createBrowserAuthError } from './BrowserAuthError.mjs';\nimport { contentError, userSwitch } from './NativeAuthErrorCodes.mjs';\nimport { PERSISTENT_ERROR, DISABLED, NO_NETWORK, USER_CANCEL, USER_INTERACTION_REQUIRED, ACCOUNT_UNAVAILABLE } from '../broker/nativeBroker/NativeStatusCodes.mjs';\nimport { noNetworkConnectivity, userCancelled } from './BrowserAuthErrorCodes.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nconst INVALID_METHOD_ERROR = -2147186943;\nconst NativeAuthErrorMessages = {\n  [userSwitch]: \"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again.\"\n};\nclass NativeAuthError extends AuthError {\n  constructor(errorCode, description, ext) {\n    super(errorCode, description);\n    Object.setPrototypeOf(this, NativeAuthError.prototype);\n    this.name = \"NativeAuthError\";\n    this.ext = ext;\n  }\n}\n/**\r\n * These errors should result in a fallback to the 'standard' browser based auth flow.\r\n */\nfunction isFatalNativeAuthError(error) {\n  if (error.ext && error.ext.status && (error.ext.status === PERSISTENT_ERROR || error.ext.status === DISABLED)) {\n    return true;\n  }\n  if (error.ext && error.ext.error && error.ext.error === INVALID_METHOD_ERROR) {\n    return true;\n  }\n  switch (error.errorCode) {\n    case contentError:\n      return true;\n    default:\n      return false;\n  }\n}\n/**\r\n * Create the appropriate error object based on the WAM status code.\r\n * @param code\r\n * @param description\r\n * @param ext\r\n * @returns\r\n */\nfunction createNativeAuthError(code, description, ext) {\n  if (ext && ext.status) {\n    switch (ext.status) {\n      case ACCOUNT_UNAVAILABLE:\n        return createInteractionRequiredAuthError(InteractionRequiredAuthErrorCodes.nativeAccountUnavailable);\n      case USER_INTERACTION_REQUIRED:\n        return new InteractionRequiredAuthError(code, description);\n      case USER_CANCEL:\n        return createBrowserAuthError(userCancelled);\n      case NO_NETWORK:\n        return createBrowserAuthError(noNetworkConnectivity);\n    }\n  }\n  return new NativeAuthError(code, NativeAuthErrorMessages[code] || description, ext);\n}\nexport { NativeAuthError, NativeAuthErrorMessages, createNativeAuthError, isFatalNativeAuthError };","map":{"version":3,"names":["INVALID_METHOD_ERROR","NativeAuthErrorMessages","userSwitch","NativeAuthError","AuthError","constructor","errorCode","description","ext","Object","setPrototypeOf","prototype","name","isFatalNativeAuthError","error","status","PERSISTENT_ERROR","DISABLED","contentError","createNativeAuthError","code","ACCOUNT_UNAVAILABLE","createInteractionRequiredAuthError","InteractionRequiredAuthErrorCodes","nativeAccountUnavailable","USER_INTERACTION_REQUIRED","InteractionRequiredAuthError","USER_CANCEL","createBrowserAuthError","userCancelled","NO_NETWORK","noNetworkConnectivity"],"sources":["D:\\selvakumar\\java-chat-repo\\websocket-springboot-01\\Java-chatapp\\chatclient\\node_modules\\@azure\\msal-browser\\src\\error\\NativeAuthError.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport {\r\n    AuthError,\r\n    InteractionRequiredAuthError,\r\n    InteractionRequiredAuthErrorCodes,\r\n    createInteractionRequiredAuthError,\r\n} from \"@azure/msal-common\";\r\nimport {\r\n    createBrowserAuthError,\r\n    BrowserAuthErrorCodes,\r\n} from \"./BrowserAuthError\";\r\n\r\nimport * as NativeAuthErrorCodes from \"./NativeAuthErrorCodes\";\r\nimport * as NativeStatusCodes from \"../broker/nativeBroker/NativeStatusCodes\";\r\nexport { NativeAuthErrorCodes };\r\n\r\nexport type OSError = {\r\n    error?: number;\r\n    protocol_error?: string;\r\n    properties?: object;\r\n    status?: string;\r\n    retryable?: boolean;\r\n};\r\n\r\nconst INVALID_METHOD_ERROR = -2147186943;\r\n\r\nexport const NativeAuthErrorMessages = {\r\n    [NativeAuthErrorCodes.userSwitch]:\r\n        \"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again.\",\r\n};\r\n\r\nexport class NativeAuthError extends AuthError {\r\n    ext: OSError | undefined;\r\n\r\n    constructor(errorCode: string, description?: string, ext?: OSError) {\r\n        super(errorCode, description);\r\n\r\n        Object.setPrototypeOf(this, NativeAuthError.prototype);\r\n        this.name = \"NativeAuthError\";\r\n        this.ext = ext;\r\n    }\r\n}\r\n\r\n/**\r\n * These errors should result in a fallback to the 'standard' browser based auth flow.\r\n */\r\nexport function isFatalNativeAuthError(error: NativeAuthError): boolean {\r\n    if (\r\n        error.ext &&\r\n        error.ext.status &&\r\n        (error.ext.status === NativeStatusCodes.PERSISTENT_ERROR ||\r\n            error.ext.status === NativeStatusCodes.DISABLED)\r\n    ) {\r\n        return true;\r\n    }\r\n\r\n    if (\r\n        error.ext &&\r\n        error.ext.error &&\r\n        error.ext.error === INVALID_METHOD_ERROR\r\n    ) {\r\n        return true;\r\n    }\r\n\r\n    switch (error.errorCode) {\r\n        case NativeAuthErrorCodes.contentError:\r\n            return true;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Create the appropriate error object based on the WAM status code.\r\n * @param code\r\n * @param description\r\n * @param ext\r\n * @returns\r\n */\r\nexport function createNativeAuthError(\r\n    code: string,\r\n    description?: string,\r\n    ext?: OSError\r\n): AuthError {\r\n    if (ext && ext.status) {\r\n        switch (ext.status) {\r\n            case NativeStatusCodes.ACCOUNT_UNAVAILABLE:\r\n                return createInteractionRequiredAuthError(\r\n                    InteractionRequiredAuthErrorCodes.nativeAccountUnavailable\r\n                );\r\n            case NativeStatusCodes.USER_INTERACTION_REQUIRED:\r\n                return new InteractionRequiredAuthError(code, description);\r\n            case NativeStatusCodes.USER_CANCEL:\r\n                return createBrowserAuthError(\r\n                    BrowserAuthErrorCodes.userCancelled\r\n                );\r\n            case NativeStatusCodes.NO_NETWORK:\r\n                return createBrowserAuthError(\r\n                    BrowserAuthErrorCodes.noNetworkConnectivity\r\n                );\r\n        }\r\n    }\r\n\r\n    return new NativeAuthError(\r\n        code,\r\n        NativeAuthErrorMessages[code] || description,\r\n        ext\r\n    );\r\n}\r\n"],"mappings":";;;;;;;;;AAAA;;;AAGG;AAyBH,MAAMA,oBAAoB,GAAG,CAAC,UAAU;AAE3B,MAAAC,uBAAuB,GAAG;EACnC,CAACC,UAA+B,GAC5B;;AAGF,MAAOC,eAAgB,SAAQC,SAAS;EAG1CC,YAAYC,SAAiB,EAAEC,WAAoB,EAAEC,GAAa;IAC9D,KAAK,CAACF,SAAS,EAAEC,WAAW,CAAC;IAE7BE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEP,eAAe,CAACQ,SAAS,CAAC;IACtD,IAAI,CAACC,IAAI,GAAG,iBAAiB;IAC7B,IAAI,CAACJ,GAAG,GAAGA,GAAG;;AAErB;AAED;;AAEG;AACG,SAAUK,sBAAsBA,CAACC,KAAsB;EACzD,IACIA,KAAK,CAACN,GAAG,IACTM,KAAK,CAACN,GAAG,CAACO,MAAM,KACfD,KAAK,CAACN,GAAG,CAACO,MAAM,KAAKC,gBAAkC,IACpDF,KAAK,CAACN,GAAG,CAACO,MAAM,KAAKE,QAA0B,CAAC,EACtD;IACE,OAAO,IAAI;EACd;EAED,IACIH,KAAK,CAACN,GAAG,IACTM,KAAK,CAACN,GAAG,CAACM,KAAK,IACfA,KAAK,CAACN,GAAG,CAACM,KAAK,KAAKd,oBAAoB,EAC1C;IACE,OAAO,IAAI;EACd;EAED,QAAQc,KAAK,CAACR,SAAS;IACnB,KAAKY,YAAiC;MAClC,OAAO,IAAI;IACf;MACI,OAAO,KAAK;EACnB;AACL;AAEA;;;;;;AAMG;SACaC,qBAAqBA,CACjCC,IAAY,EACZb,WAAoB,EACpBC,GAAa;EAEb,IAAIA,GAAG,IAAIA,GAAG,CAACO,MAAM,EAAE;IACnB,QAAQP,GAAG,CAACO,MAAM;MACd,KAAKM,mBAAqC;QACtC,OAAOC,kCAAkC,CACrCC,iCAAiC,CAACC,wBAAwB,CAC7D;MACL,KAAKC,yBAA2C;QAC5C,OAAO,IAAIC,4BAA4B,CAACN,IAAI,EAAEb,WAAW,CAAC;MAC9D,KAAKoB,WAA6B;QAC9B,OAAOC,sBAAsB,CACzBC,aAAmC,CACtC;MACL,KAAKC,UAA4B;QAC7B,OAAOF,sBAAsB,CACzBG,qBAA2C,CAC9C;IACR;EACJ;EAED,OAAO,IAAI5B,eAAe,CACtBiB,IAAI,EACJnB,uBAAuB,CAACmB,IAAI,CAAC,IAAIb,WAAW,EAC5CC,GAAG,CACN;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}